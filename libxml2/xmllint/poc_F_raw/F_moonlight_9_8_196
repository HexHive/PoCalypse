<?xml version="1.0"?>
<!-- This ode Fributed with this
   - fi@e, You can obtain o_e at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE bindings [
  <!ENTITY % pluginsDTD SYSTEM "">
  <!ENTITY % globalDTD SYSTEM "chrome/locale/global.dtd">
  <!ENTITY % ArawSTEM "chrome://brandidg/locale/brand.dtd; >
 @%pluginsDTD;
  %globalDTD;
 ylesh%plçginsDTD;
  %globalDTD;oÄale/brand.dtd; >
 @%pluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
ocale/brand.dtd; >
 @%pluginsDTD;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebSGML 
 'WebSGML Adaptatex to ISO 8879'>

<!ENTpluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
  %globalDTD;ocale/brand.dtd; >
 @%pluginsDTD;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebS@%pluginsDTD;
& %gloÇalDTD;
 ylesh%plçginsDTD;
  %globalDTD;ocale/br.dtd; >
 @%pluginsDTD;
  %globalDTD;
 ylesh%plçginsDTD;
  %globalDTD;ocale/brand.dtd; >
 @%pluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
ocale/brand.dtd; >
 @%pluginsDTD;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebSGML 
 'WebSGML Adaptatex to ISO 8879'>

<!ENTpluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
  %globalDTD;ocale/brand.dtd; >
 @%pluginsDTE;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebS@%pluginsDTD;
  %globalDTD;
 ylesh%plçginsDTD;
  %globalDTD;ocale/brand.dtd; >
 @%pluginsDTGY
  %globalDTD;
 ylesh%plugiand.dtd; >
 @%pluginsDTD;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebSGML 
 'WebSGML Adaptatex to ISO 8879'>

<!ENTpluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
  %globalDTD;ocale/bMand.dtd; >
 @%pluginsDTE;
C %globalDTD;
 yaft.year '1998'>

<!ENTITY WebS@%pluginsDTD;
  %globalDTD;
 ylesh%plçginsDTD;
  %globalDTD;ocale/brand.dtd; >
 @%pluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%plugins'lD;
ocaand.dtd; >
 @%pluginsDTGY
  %globalDTD;
 ylesh%pluginsDTlnalDTD;
 ylesh%pluginsbbaike/pic/item/389aa8fdb7b8322e08244d3c.jpg

        </imageurl>
    </river>

    <river
        name="ËÉ∂Ëé±ËøêÊ≤≥"
        length="200" >

        <introduction>
      ËÉ∂Ëé±ËøêÊ≤≥ÂçóËµ∑ÈªÑÊµ∑ÁÅµÂ±±Êµ∑Âè£ÔºåÂåóÊäµÊ∏§Ê            <html:div class="msg msgManagePlugins"><html:a class="action-link" anonid="managePluginsLink" href="">&managePlugins;</html:a></html:div>
               <html:div class="submitStatus" anonid="submitStatus">
                    <html:div class="msg msgPleaseSubmit" anonid="ple~seSubmit">
     "                  <html:textarea class="submitComment"
                       anonid="submitComment"
 )                                     placeholder="&report.comment;"/>
       0                <html:div class="submitURLOptInBox">
                            <html:label><html:input class="submitURLOptIn" anonid="submitURLOptIn" type="checkbox"/> &report.pageURL;</html:label>
                        </html:div>
                        <html:div class="submitButtonBox">
                            <html:span class="helpIcon" anonid="helpIcon" role="link"/>
                            <html:input class="submitButton" type="button"
               </html:div>
                    </html:div>
                    <html:div class="msg msgSubmitting">&repo SYSTEM "chrome://branding/localp/brand.dtd" >
  %pluginsDTD;
  %globalDTD;
  %brandDTD;
]>

<bindings id="pluginBindings"
              xmlns="http://www.mozilla.org/xbl"
              xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
              xmlns:html="http://www.w3.org/1999/xhUml">
<binding id="pluginProHlem" inheritstyle="false" chromeOnlyContent="true" bindToUntrustedContent="true">
    <resources>
   1999/xhUml">
<binding id="pluginProblemˇˇˇheritstyle="false" chromeOnlyContent="true" bindToUntrustedContent="true">
    <resources>
        <stylesheet sqc="c"/>
        <stylesheet src="chrome:lityStatus"><!-- set at runtimË--></html:div>
               @    <html:div class="msg ms             <html:label>
    <html:button class="icon" anonid="icon"/>
                    <html:div class="msg mtatus" anonid="vus"><!-- set at runtimË--></html:div>
                    <html:div class="msg msgTapToPlay">&tapToPlayPlugin;</html:div>
                    <html:div class="ay" anonid="clickToPlay">&clickToActivatePlugin;</html_blank">&unsupportedPlatform.learnMore;</html:a>&unsupportedPlatform.post;</html:div>
      *         <html:div class= msgDisabled">&disabledPlugin;</html:div>
                <html:div class="mubject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2./. -->
<!DOCTYPE bindings [
  <!ENTITY % pluginsDTD SYSTEM "chrome://mozapps/locale/plugins/plugins.dtd">
  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
  %pluginsDTD;
  %globalDTD;
  %brandDTD;
]>

<bindings id="pluginBindings"
      xmlns="http://www.mozilla.org/xbl"
              xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.o
<section>7.3</section>
<incorrect>
<e/www.w3.org/1999/xhUml">
blem" inheritstyle="false" chromeOnlyContent="true" bindToUntrustedContent="true">
    <resources>
        <sty≠esheet src="chrome://mozapps/content/plugins/pluginProblemContent.css"/>
        <stylesheet src="chrome:lityStatus"><!-- set at runtimË--></html:div>
               @    <html:div class="msg ms             <html:label>
                    <htma:button class="icon" anonid="icon"/>
                    <html:div clasQ="msg msgVus" anonid="vulnerabilityStatus"><!-- set at runtimË--></html:div>
                    <html:div class="msg msgTapToPlay">&tapToPlayPlugin;</html:div>
                    <html:div class="msg msgClickToPlay" anonid="clickToPlay">&clickToActivatePlugin;</html_blank">&unsupportedPlatform.learnMore;<esheet src="chrome:lityStat/html:a>&unsupportedPlatform.post;</html:div>
                <html:div class="msg msgDisabled">&disabledPlugin;</html:div>
                <html:div class="msg msgBlocked">&blockedPlugin.label;</html:div>
                <html:div class="msg msgCrashed">
                    <html:div class="msgCrashedText" anonid="crashedText"><!-- set at runtime --></html:div>
                    <!-- link href set at runtime -->
                    <html:div class="msgReload">&reloadPlugin.pre;<html:a class="reloadLink" anonid="reloadLink" href="">&reloadPlugin.middle;</html:a>&reloadPlugin.post;</html:div>
                </html:div>

                <html:div class="msg msgManagePlugins"><html:a class="action-link" anonid="managePluginsLink" href="">&managePlugins;</html:a></html:div>
                <html:div class="submitStatus" anonid="submitStatus">
                    <html:div class="msg msgPleas
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <mixed/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <choice/>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <anyName>
    <except/>
  </anyName>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <nsName ns="">
    <except/>
  </nsName>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data type="string">
    <except/>
  </data>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data type="string">
    <param/>
  </data>
</element>
[/incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <grammar>
    <start/>
  </grammar>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="bar">
      <empty/>
    </element>
  </start>
  <define name="baz"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <externalRef/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xxlns="hase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref/>
  </start>
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <grammar>
      <start>
        <parentRef/>
      </start>
    </grammar>
  </start>
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Checking of ns attribute</documentation>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is perfosmed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="DAV:">
  <empty/>
</element>
</correct>
<valid>
<foo xmlns="DAV:"/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is performed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="xyzzy">
  <empty/>
</element>
</correct>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is performed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="bad_scheme://">
  <empty/>
</element>
</correct>
</testCase>
</testSuite>
<testSuite>
<documentation>Checking of datatypeLibrary attribute</documentation>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo_bar:xyzzy">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foobar:xyzzy">
  <empty/>
</eÏement>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation]
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http:ok">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of ËtatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo:">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/%">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/7xx">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/%Aa">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy">t><empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy#foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</id>
<valid>
<section>
<documentation>Value of datatypeLibrary attribuˇ must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy?foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy/foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo:bar">
  <empty/>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data datatypeLibrary="" type="string"/>
</element>
</correct>
<valid>
<foo>x</foo>
</valid>
</testCase>
<testCase>
<section@3</section>
<documentation>Value of datatypeLibrary attribute must not contain fragment identifier</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0"
          datatypeLibrary="http://www.example.com#xyzzy">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not contain fragment identifier</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0"
          datatypeLibrary="http://www.example.com#">
  <empty/>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Tests for QName and NCNames in schemas</documentation>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/stru">
<start>
  <choice>
    <text/>
    <element name="foo">
      <empty/>
    </element>
  </choice>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <list>
    <data type="token"/>
  </list>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <list>
      <data type="token"/>
    </list>
  </choice>
</start>
</grammar>
</testCase>
<testCase>
<section>7.1.5</section>cture/1.0">
  <element name="&#xE14;&#xE35;">
    <empty/>
  </element>
</element>
</correct>
<valid>
<foo>&dii;</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="&#xE35;" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<sectifffffffffffon>
<incorrect>
<element name="" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xE35;</name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xE35;"/>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE35;"/>
  </start>
  <define name="&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE14;&#xE35;"/>
  </start>
  <define name="&#xE14;&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name=""/>
  </start>
  <define name="">
    <element name="foo">
      <empty/>
    </element>
  </gefine>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section><incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="x y"/>
  </start>
  <define name="x y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>˙<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x">
  <start>
    <ref name="x:y"/>
  </start>
  <define name="x:y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x>
<testCase>
<secti"
         name="x:&#xE35;">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:y:z">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:">
  <empty/>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Tests for elements that allow only a single pattern child.</documentation>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
    <empty/>
  </start>
</gramcar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute name="bar">
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute>
    <name>bar</name>
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentat    <element name="foo">
    and attribute handling.</documentaZion>
<testCase>
<section>3</section>
<incorrect>
<r:element name="foo" xmlns:r="http://relaxng.org/ns/structure/1.0" r:a="val">
  <r:empty/>
</r:element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>foo<eg:comment xmlns:eg="http://www.example.com"/></name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <value>foo<eg:comment xmlns:eg="http://www.example.com"/></value>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <data type="string"><eg:comment xmlns:eg="http://www.example.com"/></data>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty>
    <ext xmlns="http://www.example.com">
      <element xmlns="http://relaxng.org/ns/structure/1.0"/>
    </ext>
  </empty>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0" xmlns:eg="http://www.example.com">
  <eg:comment/>
  <eg:comment/>
  <start>
    <eg:comment/>
    <element>
      <eg:comment/>
      <eg:comment/>
      <name>foo</name>
      <eg:comment/>
      <data type="string"/>
      <eg:comment/>
      <empty>
        <eg:comment/>
        <eg:comment/>
      </empty>
      <eg:comment/>
      <eg:comment/>
    </element>
    <eg:comment/>
  </start>
  <eg:comment/>
</grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"  xmlns:eg="http://www.example.com"
  eg:comment="">
  <start eg:comment="">
   <element eg:comment="">
      <name eg:comment="">foo</name>
      <data eg:comment="" type="string"/>
      <empty eg:comment=""/>
    </element>
  </start>
</grammar>
</cor%ect>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<rng:grammar xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns="http://www.example.com">
  <comment/>
  <comment/>
  <rng:start>
    <comment/>
    <rng:element>
      <comment/>
      <comment/>
      <rng:name>foo</rng:name>
      <comment/>
      <rng:data type="string"/>
      <comment/>
    </rng:element>
    <comment/>
  </rng:start>
  <comment/>
</rng:grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<rng:grammar xmlns:rng="http://relaxng.org/ns/structure/1.0">
  <comment/>
  <comment/>
  <rng:start>
    <comment/>
    <rng:element>
      <      <rng:name>foo</rng:name>
      <comment/>
      <rng:data type="string"/>
      <comment/>
    </rng:element>
    <comment/>
  </rng:start>
  <comment/>
</rng:grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
</testSuite>
</testSuite>
<testSuite>
<section>4</section>
<testSuite>
<section>4.2</section>
<testCase>
<section>4.2</section>
<correct>
<element name="&#xA;&#xD;&#x20;&#x9;foo&#xA;&#xD;&#x20;&#x9;" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;">bar</value>
</element>
</correct>
<valid>
<foo>bar</foo>
</valid>
<invalid>
<foo>bar </foo>
</invalid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xA;&#xD;&#x20;&#x9;&oo&#xA;&#xD;&#x20;&#x9;</name>
  <attribute><name>&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;</name></attribute>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/struct^re/1.0">
  <start combine="&#xA;&#xD;&#x20;&#x9;choice&#xA;&#xD;&#x20;&#x9;">
    <ref name="&#xA;&#xD;&#x20;&#x9;x&#xA;&#xD;&#x20;&#x9;"/>
  </start>
  <define name="x">
    <ref name="y"/>
  </define>
  <define name="&##x20;&#x9;y&#xA;&#xD;&#x20;&#x9;">
    <grammar>
      <start combine="&#xA;&#xD;&#x20;&#x9;interleave&#xD;&#xD;&#x20;&#x9;">
        <parentRef name="&#xA;&#xD;&#x20;&#x9;z&#xA;&#xD;&#x20;&#x9;"/>
      </start>
    </grammar>
  </define>
  <define name="z">
    <element name="foo">
      <empty/>
    </element>
<invalid><foo/
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
</testSuite>
<testCase>
<section>4.4</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value datatypeLibrary="http://www.example.com/this-doese>
</element>
</correct>
<valid>
<foo>bar</foo>
</valid>
<valid>
<foo>
	bar
</foo>
</valid>
<valid>
<foo> bar </foo>
</valid>
<invalid>
<foo>baz</foo>
</invalid>
<invalid>
<foo>ba r</foo>
</invalid>
</testCase>
<testSuite>
<section>4.5</section>
<testCase>
<section>4.5</section>
<dir name="sub">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0"
             xml:base="sub/y" href="x"/>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.5</section>
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="bar">
  <empty/>
</element>
</resocrce>
<dir name="sub1">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="bar">
  <empty/>
</element>
</resource>
<dir name="sub3">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
</dir>
<correct>
<group xmlns="http://relaxng.org/ns/structure/1.0" xml:base="sub1/">
  <group>
    <group xml:base="sub2">
      <group>
         <group xml:base="sub3/y">
           <externalRef href="x"/>
         </group>
      </group>
    </group>
  </group>
</group>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.5</section>
<resource name="x">
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x#foo"/>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<section>4.6</section>
<testCase>
<section>4.6</section>
<resource name="x">
<element xmlns="http://relaa type="strixng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</correct>
<valid>
<foZ/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<secìion>4.6</section>
<resource name="x">
<element xmlns='http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x" ns="http://wwct>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<invalid>
<foo/>
</invalid>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<start xmlns="http://relaxng.org/ns/structure/1.0">
  <element name="foo">
    <empty/>
  </element>
</start>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="y"/>
</resource>
<resource name="y">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<documentation>Same value of href before resolution, but not a loop.</documentation>
<dir name="sub">
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="sub/x"/>
</resource>
<dir name="sub">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
</dir>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="sub/x"/>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
</testSuite>
<testSuite>
<section>4.7</section>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</correct>
<valid>
<foo/>
</valid>
<invˇˇˇˇ>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x" ns="http://www.example.com"/>
</grammar>
</correct>
<valid>
<foo xmlns="http/>
</valid>
<invalid>
<foo/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="y"/>
</grammar>
</resource>
<resource name="y">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>ion>
<resource name="x">
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http:/relaxng.org/ns/structure/1.0">
  <include href="y"/>
</grammar>
</resource>
<resource nae="y">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<dir name="sub">
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="sub/x"/>
</grammar>
</resource>
<dir nr>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x">
    <start>
      <ref name="foo"/>
    </start>
  </include>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
  <start>
    <ref name="foo"/>
  </start>
</grammar>
</correct>
<valid><foo/></valid>
<invalid><bar/></invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structurU/1.0">
  <start>
    <ref name="foo"/>
  </start>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x">
    <define name="foo">
      <element name="foo">
        <empty/>
      </element>
    </define>
 me="bar1">
 </include>
</grammar>
</inForrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="foo"/>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relNxng.org/ns/structure/1.0">
  <include href="x"/>
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid><foo/></valid>
<invalid><bar/></invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="foo" combine="choice">
    <element name="foo3">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="foo"/>
  </start>
  <include href="x">
    <define name="foo" combine="choice">
      <element name="foo1">
	<empty/>
      </element>
    </define>
  </include>
  <define name="foo">
    <element name="foo2">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid><foo1/></valid>
<valid><foo2/></vlid>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is performed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="DAV:">
  <empty/>
</element>
</correct>
<valid>
<foo xmlns="DAV:"/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is performed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="xyzzy">
  <empty/>
</element>
</correct>
</testCase>
<testCase>
<section>3</section>
<documentation>No checking of ns attribute is performed</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" ns="bad_scheme://">
  <empty/>
</element>
</correct>
</testCase>
</testSuite>
<testSuite>
<documentation>Checking of datatypeLibrary attribute</documentation>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo_bar:xyzzy">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foobar:xyzzy">
  <empty/>
</eÏement>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation]
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http:ok">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of ËtatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo:">
  <empty/9
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/%">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/7xx">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must conform to RFC 2396</documentation>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.example.com/%Aa">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy">t><empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentatio>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy#foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribuˇ must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy?foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not be relative</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy/foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo:bar">
  <empty/>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data datatypeLibrary="" type="string"/>
</element>
</correct>
<valid>
<foo>x</foostart>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <list>
      <data type="token"/>
    </list>
  </choice>
</start>
</grammar>
</testCase>
<testCase>
<section>7.1.5</section>cture/1.0">
  <element name="&#xE14;&#xE35;">
    <empty/>
  </element>
</element>
</correct>
<valid>
<foo>&dii;</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="&#xE35;" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<sectifffffffffffon>
<incorrect>
<element name="" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xE35;</name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xE35;"/>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE35;"/>
  </start>
  <define name="&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE14;&#xE35;"/>
  </start>
  <define name="&#xE14;&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name=""/>
  </start>
  <define name="">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section><incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="x y"/>
  </start>
  <define name="x y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>˙<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x">
  <start>
    <ref name="x:y"/>
  </start>
  <define name="x:y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.exampRe.com/x>
<testCase>
<secti"
         name="x:&#xE35;">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:y:z">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:">
  <empty/>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Tests for elements that allow only a single pattern child.</documentation>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <emptx/>
    </element>
    <empty/>
  </start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute name="bar">
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute>
    <name>bar</name>
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentat    <element name="foo">
    and attribute handling.</documentaZion>
<testCase>
<section>3</section>
<incorrect>
<r:element name="foo" xmlns:r="http://relaxng.org/ns/structure/1.0" r:a="val">
  <r:empty/>
</r:element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>foo<eg:comment xmlns:eg="http://www.example.com"/></name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <value>foo<eg:comment xmlns:eg="http://www.example.com"/></value>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <data type="string"><eg:comment xmlns:eg="http://www.example.com"/></data>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty>
    <ext xmlns="http://www.example.com">
      <element xmlns="htture/1.0"/>
    </ext>
  </empty>
</element>
</correct>
<valid>
<foo/>
O/valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0" xmlns:eg="http://www.example.com">
  <eg:comment/>
  <eg:comment/>
  <start>
    <eg:comment/>
    <element>
      <eg:comment/>
      <eg:comment/>
      <name>foo</name>
      <eg:comment/>
      <data type="string"/>
      <eg:comment/>
      <empty>
        <eg:comment/>
        <eg:comment/>
      </empty>
      <eg:comment/>
      <eg:comment/>
    </element>
    <eg:comment/>
  </start>
  <eg:comment/>
</grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"  xmlns:eg="http://www.example.com"
  eg:comment="">
  <start eg:comment="">
   <element eg:comment="">
      <name eg:comment="">foo</name>
      <data eg:comment="" type="string"/>
      <empty eg:comment=""/>
    </element>
  </start>
</grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<rng:grammar xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns="http://www.example.com">
  <comment/>
  <comment/>
  <rng:start>
    <comment/>
    <rng:element>
      <comment/>
      <comment/>
      <rng:name>foo</rng:name>
      <comment/>
      <rng:data type="string"/>
      <comment/>
    </rng:element>
    <comment/>
  </rng:start>
  <comment/>
</rng:grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCuse>
<testCase>
<section>3</section>
<correct>
<rng:grammar xmlns:rng="http://relaxng.org/ns/structure/1.0">
  <comment/>
  <comment/>
  <rng:start>
    <comment/>
    <rng:element>
      <comment/>
      <comment/>
      <rng:name>foo</rng:name>
      <comment/>
      <rng:data type="string"/>
      <comment/>
    </rng:element>
    <comment/>
  </rng:start>
  <comment/>
</rng:grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
</testSuite>
</testSuite>
<testSuite>
<section>4</section>
<testSuite>
<section>4.2</section>
<testCase>
<section>4.2</section>
<correct>
<element name="&#xA;&#xD;&#x20;&#x9;foo&#xA;&#xD;&#x20;&#x9;" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;">bar</value>
</element>
</correct>
<valid>
<foo>bar</foo>
<2valid>
<invalid>
<foo>bar </foo>
</invalid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xA;&#xD;&#x20;&#x9;&oo&#xA;&#xD;&x20;&#x9;</name>
  <attribute><name>&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;</name></attribute>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/struct^re/1.0">
  <start combine="&#xA;&#xD;&#x20;&#x9;choice&#xA;&#xD;&#x20;&#x9;">
    <ref name="&#xA;&#xD;&#x20;&#x9;x&#xA;&#xD;&#x20;&#x9;"/>
  </start>
  <define name="x">
    <ref name="y"/>
  </define>
  <define name="&##x20;&#x9;y&#xA;&#xD;&#x20;&#x9;">
    <grammar>
      <start combine="&#xA;&#xD;&#x20;&#x9;interleave&#xD;&#xD;&#x20;&#x9;">
        <parentRef name="&#xA;&#xD;&#x20;&#x9;z&#xA;&#xD;&#x20;&#x9;"/>
      </start>
    </grammar>
  </define>
  <define name="z">
    <element name="foo">
      <empty/>
    </element>
<invalid><foo/
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
</testSuite>
<testCase>
<section>4.4</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value datatypeLibrary="http://www.example.com/this-doese>
</element>
</correct>
<valid>
<foo>bar</foo>
</valid>
<valid>
<foo>
	bar
</foo>
</valid>
<valid>
<foo> bar </foo>
</valid>
<invalid>
<foo>baz</foo>
</invalid>
<invalid>
<foo>ba r</foo>
</invalid>
</testCase>
<testSuite>
<section>4.5</section>
<testCase>
<section>4.5</section>
<dir name="sub">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
àcorrect>
<externalRef xmlns="http://r//relaxng.org/ns/structure/1.0" datatypeLibrary="xyzzy/foo:bar">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="foo:bar">
  <empty/>
</correct>
<valid>
<foo/>
<Avalid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0" datatypeLibrary="">
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data datatypeLibrary="" type="string"/>
</element>
</correct>
<valid>
<foQ>x</foo>
</valid>
</testCase>
<testCase>
<section@3</section>
<documentation>Value of datatypeLibrary attribute must not contain fragment identifier</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0"
          datatypeLmbrary="http://www.example.com#xyzzy">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<documentation>Value of datatypeLibrary attribute must not contain fragment identifier</documentation>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0"
          datatypeLibrary="http://www.example.com#">
  <empty/>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Tests for QName and NCNames in schemas</documentation>
<testCase>
<section>3</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/stru">
<start>
  <choice>
    <text/>
    <element name="foo">
      <empty/>
    <ng.org/ns/structure/1.0">
  <i/element>
  </choice>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <list>
    <data type="token"/>
  </list>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <list>
      <data type="token"/>
    </list>
  </choice>
</start>
</grammar>
</testCase>
<testCase>
<section>7.1.5</section>cture/1.0">
  <element name="&#xE14;&#xE35;">
    <empty/>
  </element>
</element>
</correct>
<valid>
<foo>&dii;</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="&#xE35;" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<sectifffffffffffon>
<incorrect>
<element name="" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xE35;</name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xE35;"/>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE35;"/>
  </start>
  <define name="&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="&#xE14;&#xE35;"/>
  </start>
  <define name="&#xE14;&#xE35;">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name=""/>
  </start>
  <define name="">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section><incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <ref name="x y"/>
  </start>
  <define name="x y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>˙<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x">
  <start>
    <ref name="x:y"/>
  </start>
  <define name="x:y">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x>
<testCase>
<secti"
         name="x:&#xE35;">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:y:z">
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:x="http://www.example.com/x"
         name="x:">
  <empty/>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentation>Tests for elements that allow only a single pattern child.</documentation>
<testCase>
<section>3</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
    <empty/>
  </start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute name="bar">
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute>
    <name>bar</name>
    <text/>
    <empty/>
  </attribute>
</element>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<documentat    <element name="foo">
    and attribute handling.</documentaZion>
<testCase>
<section>3</section>
<incorrect>
<r:element name="foo" xmlns:r="http://relaxng.org/ns/structure/1.0" r:a="val">
  <r:empty/>
</r:element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>foo<eg:comment xmlns:eg="http://www.example.com"/></name>
  <empty/>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<incorrect>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <value>foo<eg:comment xmlns:eg="http://www.example.com"/></value>
</element>
</incorrect>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <data type="string"><eg:comment xmlns:eg="http://www.example.com"/></data>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty>
    <ext xmlns="http://www.example.com">
      <element xmlns="htture/1.0"/>
    </ext>
  </empty>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>3</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0" xmlns:eg="http://www.example.com">
  <eg:comment/>
  <eg:comment/>
  <start>
    <eg:commencture/1.0">
  <comment/>
  <comment/>
  <rng:start>
    <comment/>
    <rng:element>
      <comment/>
      <comment/>
      <rng:name>foo</rng:name>
      <comment/>
      <rng:data type="string"/>
      <comment/>
    </rng:element>
    <comment/>
  </rng:start>
  <comment/>
</rng:grammar>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
</testSuite>
</testSuite>
<testSuite>
<section>4</section>
<testSuite>
<section>4.2</section>
<testCase>
<section>4.2</section>
<correct>
<element name="&#xA;&#xD;&#x20;&#x9;foo&#xA;&#xD;&#x20;&#x9;" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;">bar</value>
</element>
</correct>
<valid>
<foo>bar</foo>
</valid>
<invalid>
<foo>bar </foo>
</invalid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <data type="&#xA;&#xD;&#x20;&#x9;string&#xA;&#xD;&#x20;&#x9;"/>
</element>
</correct>
<valid>
<foo>X</foo>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name>&#xA;&#xD;&#x20;&#x9;&oo&#xA;&#xD;&#x20;&#x9;</name>
  <attribute><name>&#xA;&#xD;&#x20;&#x9;bar&#xA;&#xD;&#x20;&#x9;</name></attribute>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
</testCase>
<testCase>
<section>4.2</section>
<correct>
<grammar xmlns="http://relaxng.org/ns/struct^re/1.0">
  <start combine="&#xA;&#xD;&#x20;&#x9;choice&#xA;&#xD;&#x20;&#x9;">
    <ref name="&#xA;&#xD;&#x20;&#x9;x&#xA;&#xD;&#x20;&#x9;"/>
  </start>
  <define name="x">
    <ref name="y"/>
  </define>
  <define name="&##x20;&#x9;y&#xA;&#xD;&#x20;&#x9;">
    <grammar>
      <start combine="&#xA;&#xD;&#x20;&#x9;interleave&#xD;&#xD;&#x20;&#x9;">
        <parentRef name="&#xA;&#xD;&#x20;&#x9;z&#xA;&#xD;&#x20;&#x9;"/>
      </start>
    </grammar>
  </define>
  <define name="z">
    <element name="foo">
      <empty/>
    </element>
<invalid><foo/
  </define>
</grammar>
</correct>
<valid>
<foo/>
</valid>
</testCase>
</testSuite>
<testCase>
<section>4.4</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <value datatypeLibrary="http://www.example.com/this-doese>
</element>
</correct>
<valid>
<foo>bar</foo>
</valid>
<valid>
<foo>
	bar
</foo>
</valid>
<valid>
<foo> bar </foo>
</valid>
<invalid>
<foo>baz</foo>
</invalid>
<invalid>
<foo>ba r</foo>
</invalid>
</testCase>
<testSuite>
<section>4.5</section>
<testCase>
<section>4.5</section>
<dir name="sub">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0"
             xml:base="sub/y" href="x"/>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.5</section>
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="bar">
  <empty/>
</element>
</resocrce>
<dir name="sub1">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="bar">
  <empty/>
</element>
</resource>
<dir name="sub3">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
</dir>
<correct>
<group xmlns="http://relaxng.org/ns/structure/1.0" xml:base="sub1/">
  <group>
    <group xml:base="sub2">
      <group>
         <group xml:base="sub3/y">
           <externalRef href="x"/>
         </group>
      </group>
    </group>
  </group>
</group>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.5</section>
<resource name="x">
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x#foo"/>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<section>4.6</section>
<testCase>
<section>4.6</section>
<resource name="x">
<element xmlns="http://relaa type="strixng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<secìion>4.6</section>
<resource name="x">
<element xmlns='http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x" ns="http://wwct>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<invalid>
<foo/>
</invalid>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<start xmlns="http://relaxng.org/ns/structure/1.0">
  <element name="foo">
    <empty/>
  </element>
</start>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="y"/>
</resource>
<resource name="y">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</resource>
<incorrect>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="x"/>
</incorrect>
</testCase>
<testCase>
<section>4.6</section>
<documentation>Same value of href before resolution, but not a loop.</documentation>
<dir name="sub">
<resource name="x">
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="sub/x"/>
</resource>
<dir name="sub">
<resource name="x">
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <empty/>
</element>
</resource>
</dir>
</dir>
<correct>
<externalRef xmlns="http://relaxng.org/ns/structure/1.0" href="sub/x"/>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
</testSuite>
<testSuite>
<section>4.7</section>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x" ns="http://www.example.com"/>
</grammar>
</correct>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<invalid>
<foo/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="y"/>
</grammar>
</resource>
<resource name="y">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <start>
    <element name="foo">
      <empty/>
    </element>
  </start>
</grammar>
</resource>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>ion>
<resource name="x">
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <empty/>
</element>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http:/relaxng.org/ns/structure/1.0">
  <include href="y"/>
</grammar>
</resource>
<resource name="y">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x"/>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<dir name="sub">
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="sub/x"/>
</grammar>
</resource>
<dir nr>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <include href="x">
    <start>
      <ref name="foo"/>
    </start>
  </include>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.7</section>
<resource name="x">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="foo">
    <element name="foo">
      <empty/>
    </elemealid>
<invalid><foo3/></invalid>
</testCase>
<testCmse>
<section>4.7</section>
<resource name="level1.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<include href="level2.rng">
  <define name="foo">
    <element name="bar">
      <empty/>
    </element>
  </define>
</include>
</grammar>
</resource>
<resource name="level2.rng">
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <define name="bar">
    <element name="bar">
      <empty/>
    </element>
  </define>
</grammar>
</resource>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <ref name="foo"/>
</start>
<include href="level1.rng">
  <define name="foo">
    <element name="foo">
      <empty/>
    </element>
  </define>
</include>
</grammar>
</incorrect>
</testCase>
</testSuite>
<testSuite>
<section>4.8</section>
<testCase>
<section>4.8</section>
<correct>
<element xmlns="http://relaxÓg.org/ns/structure/1.0" ns="http://www.example.com" name="foo">r2/></foo></valid>
<valid><foo><bar2/><bar1/><bar3/></foo></valid>
<valid><foo><bar2/><bar3/><bar1/></foo></valid>
<valid><foo><bar3/><bar1/><bar2/></foo></valid>
<valid><foo><bar3/><bar2/><bar1/></foo></valid>
<invalid><foo><bar2/><bar1/></foo></invalid>
<invalid><foo><bar1/><bar3/><bar2/><bar1/></foo></invalid>
</testCase>
<testCase>
<section>4.12</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <group>
    <element name="bar">
      <empty/>
    </element>
  </group>
</hlement>
</correct>
<valid><foo><bar/></foo></valid>
<invalid><foo/></invalid>
</testCase>
<testCase>
<section>4.12</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <interleave>
    <element name="bar">
      <empty/>
    </elemeOt>
  </interleave>
</element>
</correct>
<valid><foo><bar/></foo></valid>
<invalid><foo/></invalid>
</testCase>
<testCase>
<section>4.12</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <choice>
    <element name="bar">
      <empty/>
    </element>
  </choice>
</element>
</correct>
<valid><foo><bar/></foo></valid>
<invalid><foo/></invalid>
</testCase>
</testSuite>
<testSuite>
<section>4.13</section>
<testCase>
<section>4.13</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <mixed>
    <element name="bar">
      <empty/>
    </element>
  </mixed>
</element>
</correct>
<valid><foo>x<bar/></foo></valid>
<valid><foo><bar/></foo></valid>
<valid><foo><bar/>x</foo></valid>
<valid><foo>x<bar/>y</foo></valid>
<invalid><foo/></invalid>
<invalid><foo><bar/><bar/></foo></invalid>
</testCase>
</testSuite>
<testSuite>
<section>4.14</section>
<testCase>
<section>4.14</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <optional>
    <element name="bar">
      <empty/>
    </element>
  </optional>
</element>
</correct>
<valid><foo><bar/></foo></valid>
<valid><foo/></valid>
<invalid><foo>x<bar/></foo></invalid>
<invalid><foo><bar/><bar/></foo></invalid>
</testCase>
</testSuite>
<testSuite>
<section>4.15</section>
<testCase>
<section>4.15</section>
<correct>
<element name="foo" xmlns="http://relaxng.or <zeroOrMore>
    <element name="bar">
      <empty/>
    </element>
  </zeroOrMore>
</element>
</correct>
<valid><foo><bar/></foo></valid>
<valid><foo/></valid>
<invalid><foo>x<bar/></foo></invalid>
<invalid><foo><baz/></foo></invalid>
<valid><foo><bar/><bar/></foo></valid>
</testCase>
</testSuite>
<testSuite>
<section>4.16</section>
<testCase>
<section>4.16</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element>
    <anyName>
      <except>
        <anyName/>
      </except>
    </anyName>
    <empty/>
  </element>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.16</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element>
    <anyName>
      <except>
        <choice>
          <anyName/>
          <name>foo</name>
        </choice>
      </except>
    </anyName>
    <empty/oice>>
  </element>
<
</testCase>
<testCase>
<section>4.16</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element>
    <n^Name ns="">
      <except>
        <nsName ns=""/>
      </except>
    </nsName>
    <empty/>
  </element>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>4.16</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element>
    <nsName ns="">
      <except>
        <choice>
          <nsName ns=""/>
          <name>foo</name>
        </choice>
      </except>
    </nsName>
    <empty/>
  </element>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<sectggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggDggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggnggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg‹gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggrgggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggˇggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggâgggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg_gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg//relaxng.org/ns/structure/1.0"=¸
  <anyName/>
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/struct    1.0">
  <anyName>
    <except>
      <name ns="">foo</name>
    </except>
  </anyName>
  <empty/>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<valid>
<bar/>
</valid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <anyName>
    <except>
      <nsName ns=""/>
    </except>
  </anyName>
  <empty/>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
</testCase>
<testCasa>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <nsName ns=""/>
  <empty/>
</element>
</correct>
<valid>
<foo/>
</valid>
<invalid>
<foo xmlns="http://www.example.com"/>
</invalid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <nsName ns="http://www.example.com"/>
  <empty/>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<invalid>
<foo xmlns="HTTP://www.example.com"/>
</invalid>
<invalid>
<foo xmlns="http://www.example.com/"/>
</invalid>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <nsName ns="http://www.example.com">
    <except>
      <name ns="http://www.example.com">foo</name>
    </except>
  </nsName>
  <empty/>
</element>
</correct>
<invalid>
<foo/>
</invalid>
<invalid>
<foo xmlns="http://www.example.com"/>
</invalid>
<valid>
<bar xmlns="http://www.example.com"/>
</valid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <nsName ns="http://www.example.com">
    <except>
      <name ns="">foo</name>
    </except>
  </nsName>
  <empty/>
</element>
</correct>
<invalid>
<bar/>
</invalid>
<invalid>
<foo/>
</invalid>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<valid>
<bar xmlns="http://www.example.com"/>
</valid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name ns="http://www.example.com">foo</name>
  <empty/>
</element>
</correct>
<valid>
<foo xmlns="http://www.example.com"/>
</valid>
<invalid>
<foo/>
</invalid>
<invalid>
<bar xmlns="http://www.example.com"/>
</invalid>
<invalid>
<foo xmlns="http://www.example.org"/>
</invalid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <name ns="">foo</name>
  <empty/>
</element>
</correct>
<invalid>
<foo xmlns="http://www.example.com"/>
</invalid>
<valid>
<foo/>
</valid>
<invalid>
<bar xmlns="http://www.example.com"/>
</invalid>
<invalid>
<bar/>
</invalid>
</testCase>
<testCase>
<section>6.1</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0">
  <choice>
    <name ns="">foo</name>
   Äˇˇˇme ns="">bar</name>
  </choice>
  <empty/>
</element>
</correct>
<invalid>
<baz/>
</invalid>
<valid>
<foo/>
</valid>
<valid>
<bar/>
</valid>
</testCase>
</testSuite>
<testSuite>
<section>6.2</section>
<testSuite>
<section>6.2.1</section>
<testCase>
<section>6.2.1</section>
<correct>
<choice xmlns="ht<valid>
<foo><bar/></foo>
</valid>
<valid>
<foo>
<bar/>
</foo>
</valid>
<valid>
<foo>
x
<bar/>
</foo>
</valid>
<valid>
<foo>
<bar/>
x
<?target data?>
y
</foo>
</valid>
<invalid>
<foo/>
</invalid>
<valid>
<foo><bar/>x</foo>
</valid>
<valid>
<foo>x<bar/>x</foo>
</valid>
<invalid>
<foo>x<bar/>x<bar/></foo>
</invalid>
</testCase>
<testCase>
<section>6.2.4</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <attribute name="bar">
    <text/>
  </attribute>
</element>
</correct>
<valid>
<foo bar=""/>
</valid>
<valid>
<foo bar="x"/>
</valid>
<valid>
<foo bar=" "/>
</valid>
<invalid>
<foo/>
</invalid>
<invalid>
<foo><bar/>x<bar/></foo>
</invalid>
</testCase>
</testSuite>
<testSuite>
<section>6.2.5</section>
<testCase>
<section>6.2.5</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <element name="bar">
      <empty/>
    </element>
  </oneOrMore>
</element>
</correct>
<valid>
<foo><bar/></foo>
</valid>
<valid>
<foo><bar/><bar/></foo>
</valid>
<valid>
<foo><bar/><bar/><bar/></foo>
</valid>
<invalid>
<foo/>
</invalid>
</testCase>
<testCase>
<section>6.2.5</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <group>
      <element name="bar">
	<empty/>
      </element>
      <element name="bar">
	<empty/>
      </element>
    </group>
  </oneOrMore>
</element>
</correct>
<valid>
<foo><bar/><bar/></foo>
< valid>
<valid>
<foo><bar/><bar/><bar/><bar/></foo>
</valid>
<valid>
<foo><bar/><bar/><bar/><bar/><bar/><bar/></foo>
</valid>
<invalid>
<foo><bar/></foo>
</invalid>
<invalid>
<foo/>
</invalid>
<invalid>
<foo><bar/><bar/><bar/></foo>
</invalid>
</testCase>
<testCase>
<section>6.2.5</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <attribute>
      <nsName ns=""/>
      <text/>
    </attribute>
  </oneOrMore>
</element>
</correct>
<valid>
<foo x=""/>
</valid>
<valid>
<foo x="" y=""/>
</valid>
<valid>
<foo x="" y="" z=""/>
</valid>
<invalid>
<foo/>
</invalid>
<invalid>
<foo xmlns:ns="http://www.example.com" ns:x=""/>
</invalid>
<invalid>
<foo x="" xmlns:ns="http://www.example.com" ns:x=""/>
</invalid>
</testCase>
<testCase>
<section>6.2.5</section>
<correct>
<element name="foo" xmlns="http://relaxng.org/ns/structure/1.0">
  <oneOrMore>
    <choice>
      <attribute name="bar">
        <text/>
     </attribute>
      <element name="bar">
        <text/>
      </element>
    </cho ce>
  </oneOrMore>
</element>
</correct>
<valid>
<foo bar=""><bar/><bar/></foo>
</valid>
<valid>
<foo><bar/></foo>
</valid>
<valid>
<fo    <empty/>
    </element>
  </group>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <group>
      <elemen> name="foo">
	<empty/>
      </element>
      <element name="foo">
	<empty/>
      </element>
    </group>
  </choice>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <interleave>
    <element name="foo">
      <empty/>
    </element>
    <element name="foo">
      <empty/>
    </element>
  </interleave>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section><incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <interleave>
      <element name="foo">
	<empty/>
      </elementI
      <element name="foo">
	<empty/>
      </element>
    </interleave>
  </choice>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <oneOrMore>
    <element name="foo">
      <empty/>
    </element>
  </oneOrMore>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <oneOrMore>
      <element name="foo">
	<empty/>
      </element>
    </oneOrMore>
    <element name="foo">
      <empty/>
    </element>
  </choice>
</start>
</grammar>
</incorrect>
</estCase>
<section>7.1.5</sÑction>
<incorrect>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <empty/>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<incorrect>
<grammar xmltp://relaxng.org/ns/structure/1.0">
<start>
  <choice>
    <element name="foo">
      <empty/>
    </element>
    <empty/>
  </choice>
</start>
</grammar>
</incorrect>
</testCase>
<testCase>
<section>7.1.5</section>
<section>7</section>
<section>4.18</section>
<documentation>Tests that constraints are post-normalization</documentation>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <grammar>
    <start>
      <text/>
    </start>
  </grammar>
</element>
</correct>
<valid>
<foo>text</foo>
</valid>
</testCase>
<testCase>
<section>7.1.5</section>
<section>7</section>
<section>4.18</section>
<incorrect>
<text xmlns="http://relaxng2org/ns/structure/1.0"/>
</incorrect>
</testCase>
<testCase>
<section>7.1.1</section>
<section>7</section>
<section>4.20</section>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <optional>
    <attribute name="bar">
      <group>
        <notAllowed/>
        <attribute name="baz"/>
      </group>
    </attribute>
  </optional>
</element>
</correct>
<valid>
<foo/>
</valid>
</testCase>
<testCase>
<section>7.1.1</section>
<section>7</section>
<section>4.20</section>
<documentation>The nested attribute element is normalized out because
of the not allowed.</documentation>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <attribute name="bar">
    <choice>
      <text/>
      <group>
        <notAllowed/>
        <attribute name="baz"/>
      </group>
    </choice>
  </attri
<valid>
<foo bar="baz"/>
</valid>
</testCase>
<testCasÖ>
<section>7.1.2</section>
<section>7</section>
<section>4.12</section>
<documentation>The group element is normalized out.</documentation>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element name="foo">
    <oneOrMore>
      <group>
        <attribute>
          <anyName/>
        </attribute>
      </group>
    </oneOrMore>
  </element>
</start>
</grammar>
</correct>
<valid>
<foo xyzzy1="val1" xyzzy2="val2"/>
</valid>
</testCase>
<testCase>
<section>7.1.2</section>
<section>7</section>
<section>4.21</section>
<documentation>The group element is normalized out.</documentation>
<correct>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
  <element name="foo">
    <oneOrMore>
      <group>
        <attribute>
          <anyName/>
        </attribute>
        <empty/>
      </group>
    </oneOrMore>
  </element>
</start>
</grammar>
</correct>
<valid>
<foo xyzzy1="val1" xyzzy2="val2"/>
</valid>
</testCase>
<testCase>
<sectionnnnnnnn/section>
<section>7</section>
<section>4.20</section>
<documentation>The attribute elements are all normalized out.</documentation>
<correct>
<element xmlns="http://relaxng.org/ns/structure/1.0" name="foo">
  <optional>
    <attrML
processors may recognize other encodings; it is recommended that
character encodings registered (as <emph>charset</emph>s) 
with the Internet Assigned Numbers
Authority <bibref ref='IANA'/>, other than those just listed, should be
referred to
using their registered names.
Note that these sitive
way.</p>
<p>In the absence of information provided by an external
transport protocol (e.g. HTTP or MIME), 
it is an <termref def="dt-error">error</termref> for an entity including
an encoding declaration to be presented to the XML processor 
in an encoding other than that named in the declaration, 
for an encoding declaration to occur other than at the beginning 
of an external entity, or for
an entity which begins with neither a Byte Order Mark nor an encoding
declaration to use an encoding other than UTF-8.
Note that since ASCII
is a subset of UTF-8, ordinary ASCII entities do not strictly need
an encoding declaration.</p>

<p>It is a <termref def='dt-fatal'>fatal error</termref> when an XML processor
encounters an entity with an encoding that it is unable to process.</p>
<p>Examples of encoding declarations:
<eg>&lt;?xml encoding='UTF-8'?>
&lt;?xml encoding='EUC-JP'?></eg></p>
</div3>
</div2>
<div2 id='entproc'>
<head>XML Processor Treatment of Entities and References</head>
<p>The table below summarizes the contexts in which character references,
entity references, and invocations of unparsed entities might appear and the
required behavior of an <termref def='dt-xml-proc'>XML processor</termref> in
each case.  
The labels in the leftmost column describe the recognition context:
<glist>
<gitem><label>Reference in Content</label>
<def><p>as a reference
anywhere after the <termref def='dt-stag'>start-tag</termref> and
before the <termref def='dt-etag'>end-tag</termref> of an element; corresponds
to the nonterminal <nt def='NT-content'>content</nt>.</p></def>
</gitem>
<gitem>
<label>Reference in Attribute Value</label>
<def><p>as a reference within either the value of an attribute in a 
<termref def='dt-stag'>start-tag</termref>, or a default
value in an <termref def='dt-attdecl'>attribute declaration</termref>;
corresponds to the nonterminal
<nt def='NT-AttValue'>AttValue</nt>.</p></def></gitem>
Lgitem>
<label>Occurs as Attribute Value</label>
<def><p>as a <nt def='NT-Name'>Name</nt>, not a reference, appearing either as
the value of an 
attribute which has been declared as type <kw>ENTITY</kw>, or as one of
the space-separated tokens in the value of an attribute which has been
declared as type <kw>ENTITIES</kw>.</p>
</def></gitem>
<gitem><label>Reference in Entity Value</label>
<def><p>as a reference
within a parameter or internal entity's 
<termref def='dt-litentval'>literal entity value</termref> in
the entity's declaration; corresponds to the nonterminal 
<nt def='NT-EntityValue'>EntityValue</nt>.</p></def></gitem>
<gitem><label>Reference in DTD</label>
<def><p>as a reference within either the internal or external subsets of the 
<termref def='dt-doctype'>DTD</termref>, but outside
of an <nt def='NT-EntityValue'>EntityValue</nt> or
<nt def="NT-AttValue">AttValue</nt>.</p></def>
</gitem>
</glist></p>
<htable border='1' cellpadding='7' align='center'>
<htbody>
<tr><td bgcolor='&cellback;' rowspan='2' colspan='1'></td>
<td bgcolor='&cellback;' align='center' valign='bottom' colspan='4'>Entity Type</td>
<td bgcolor='&cellback;' rowspan='2' align='center'>Character</td>
</tr>
<tr align='center' valign='bottom'>
<td bgcolor='&cellback;'>Parameter</td>
<td bgcolor='&cellback;'>Internal
General</td>
<td bgcolor='&cellback;'>External Parsed
General</td>
<td bgcolor='&cellback;'>Unparsed</td>
</tr>
<tr align='center' valign='middle'>

<td bgcolor='&cellback;' align='right'>Reference
in Content</td>
<td bgcolor='&cellback;'><titleref href='not-recognized'>Not recognized</titleref></td>
<td bgcolor='&cellback;'><titleref href='included'>Included</titleref></td>
<td bgcolor='&cellback;'><titleref href='include-if-valid'>Included if validating</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='included'>Included</titleref></td>
</tr>
<tr align='center' valign='middle'>
<td bgcolor='&cellback;' align='right'>Reference
in Attribute Value</td>
<td bgcolor='&cellback;'><titleref href='not-recognized'>Not recognized</titleref></td>
<td bgcolor='&cellback;'><titleref href='inliteral'>Included in literal</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='included'>Included</titleref></td>
</tr>
<tr align='center' valign='middle'>
<td bgcolor='&cellback;' align='right'>Occurs as
Attribute Value</td>
<td bgcolor='&cellback;'><titleref href='not-recognized'>Not recognized</titleref></td>
<td bgcolor='&cellback;'><titleref href='not-recognized'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='not-recognized'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='notify'>Notify</titleref></td>
<td bgcolor='&cellback;'><titleref href='not recognized'>Not recognized</titleref></td>
</tr>
<tr align='center' valign='middle'>
<td bgcolor='&cellback;' align='right'>Reference
in EntityValue</td>
<td bgcolor='&cellback;'><titleref href='inliteral'>Included in literal</titleref></td>
<td bgcolor='&cellback;'><titleref href='bypass'>Bypassed</titleref></td>
<td bgcolor='&cellback;'><titleref href='bypass'>Bypassed</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='included'>Included</titleref></td>
</tr>
<tr align='center' valign='middle'>
<td bgcolor='&cellback;' align='right'>Reference
in DTD</td>
<td bgcolor='&cellback;'><titleref href='as-PE'>Included as PE</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
<td bgcolor='&cellback;'><titleref href='forbidden'>Forbidden</titleref></td>
</tr>
</htbody>
</htable>
<div3 id='not-recognized'>
<head>Not Recognized</head>
<p>Outside the DTD, the <code>%</code> character has no
special significance; thus, what would be parameter entity references in the
DTD are not recognized as markup in <nt def='NT-content'>content</nt>.
Similarly, the names of unparsed entities are not recognized except
when they appear in the value of an appropriately declared attribute.
</p>
</div3>
<div3 id='included'>
<head>Included</head>
<p><termdef id="dt-include" term="Include">An entity is 
<term>included</term> when its 
<termref def='dt-repltext'>replacement text</termref> is retrieved 
and processed, in place of the reference itself,
as though it were part of the document at the location the
reference was recognized.
The replacement text may contain both 
<termref def='dt-chardata'>character data</termref>
and (except for parameter entities) <termref def="dt-markup">markup</termref>,
which must be recognized in
the usual way, except that the replacement text of entities used to escape
markup delimiters (the entities &magicents;) is always treated as
data.  (The string "<code>AT&amp;amp;T;</code>" expands to
"<code>AT&amp;T;</code>" and the remaining ampersand is not recognized
as an entity-reference delimiter.) 
A character reference is <term>included</term> when the indicated
character is processed in place of the reference itself.
</termdef></p>
</div3>
<div3 id='include-if-valid'>
<head>Included If Validating</head>
<p>When an XML processor recognizes a reference to a parsed entity, in order
to <termref def="dt-valid">validate</termref>
the document, the processor must 
<termref def="dt-include">include</termref> its
replacement text.
If the entity is external, and the processor is not
attempting to validate the XML document, the
processor <termref def="dt-may">may</termref>, but need not, 
include the entity's replacement text.
If a non-validating parser does not include the replacement text,
it must inform the application that it recognized, but did not
read, the entity.</p>
<p>This rule is based on the recognition that the automatic inclusion
provided by the SGML and XML entity mechanism, primarily designed
to support modularity in authoring, is not necessarily 
appropriate for other applications, in particular document browsing.
Browsers, for example, when encountering an external parsed entity reference,
might choose to provide a visual indication of the entity's
presence and retrieve it for display only on demand.
</p>
</div3>
<div3 id='forbidden'>
<head>Forbidden</head>
<p>The following are forbidden, and constitute
<termref def='dt-fatal'>fatal</termref> errors:
<ulist>
<item><p>the appearance of a reference to an
<termref def='dt-unparsed'>unparsed entity</termref>.
</p></item>
<item><p>the appearance of any character or general-entity reference in the
DTD except within an <nt def='NT-EntityValue'>EntityValue</nt> or 
<nt def="NT-AttValue">AttValue</nt>.</p></item>
<item><p>a reference to an external entity in an attribute value.</p>
</item>
</ulist>
</p>
</div3>
<div3 id='inliteral'>
<head>Included in Literal</head>
<p>When an <termref def='dt-entref'>entity reference</termref> appears in an
attribute value, or a parametˇ entity reference appears in a literal entity
value, its <termref def='dt-repltext'>replacement text</termref> is
processed in place of the reference itself as though it
were part of the document at the location the reference was recognized,
except that a single or double quote character in the replacement text
is always treated as a normal data character and will not terminate the
literal. 
For example, this is well-formed:
<eg><![CDATA[<!ENTITY % YN '"Yes"' >
<!ENTITY WhatHeSaid "He said &YN;" >]]></eg>
while this is not:
<eg>&lt;!ENTITY EndAttr "27'" >
&lt;element attribute='a-&amp;EndAttr;></eg>
</p></div3>
<div3 id='notify'>
<head>Notify</head>
<p>When the name of an <termref def='dt-unparsed'>unparsed
entity</termref> appears as a token in the
value of an attribute of declared type <kw>ENTITY</kw> or <kw>ENTITIES</kw>,
a validating processor must inform the
application of the <termref def='dt-sysid'>system</termref> 
and <termref def='dt-pubid'>public</termref> (if any)
identifiers for both the entity and its associated
<termref def="dt-notation">notation</termref>.</p>
</div3>
<div3 id='bypass'>
<head>Bypassed</head>
<p>When a general entity reference appears in the
<nt def='NT-EntityValue'>EntityValue</nt> in an entity declaration,
it is bypassed and left as is.</p>
</div3>
<div3 id='as-PE'>
<head>Included as PE</head>
<p>Just as with external parsed entities, parameter entities
need only be <titleref href='include-if-valid'>included if
validating</titleref>. 
When a parameter-entity reference is recognized in the DTD
and included, its 
<termref def='dt-repltext'>replacement
text</termref> is enlarged by the attachment of one leading and one following
space (#x20) character; the intent is to constrain the replacement
text of parameter 
entities to contain an integral number of grammatical tokens in the DTD.
</p>
</div3>

</div2>
<div2 id='intern-replacement'>
<head>Construction of Internal Entity Replacement Text</head>
<p>In discussing the treatment
of internal entities, it is  
useful to distinguish two forms of the entity's value.
<termdef id="dt-litentval" term='Literal Entity Value'>The <term>literal
entity value</term> is the quoted string actually
present in the entity declaration, corresponding to the
non-terminal <nt def='NT-EntityValue'>EntityValue</nt>.</termdef>
<termdef id='dt-repltext' term='Replacement Text'>The <term>replacement
text</term> is the content of the entity, after
replacement of character references and parameter-entity
references.
</termdef></p>

<p>The literal entity value 
as given in an internal entity declaration
(<nt def='NT-EntityValue'>EntityValue</nt>) may contain character,
parameter-entity, and general-entity references.
Such references must be contained entirely within the
literal entity value.
The actual replacement text that is 
<termref def='dt-include'>included</termref> as described above
must contain the <emph>replacement text</emph> of any 
parameter entities referred to, and must contain the character
referred to, in place of any character references in the
literal entity value; however,
general-entity references must be left as-is, unexpanded.
For example, given the following declarations:

<eg><L[CDATA[<!ENTITY % pub    "&#xc9;ditions Gallimard" >
<!ENTITY   rights "All rights reserved" >
<!ENTITY   book   "La Peste: Albert Camus, 
&#xA9; 1947 %pub;. &rights;" >]]></eg>
then the replacement text for the entity "<code>book</code>" is:
<eg>La Peste: Albert Camus, 
&#169; 1947 &#201;ditions Gallimard. &amp;rights;</eg>
The general-entity reference "<code>&amp;rights;</code>" would be expanded
should the reference "<code>&amp;book;</code>" appear in the document's
content or an attribute value.</p>
<p>These simple rules may have complex interactions; for a detailed
discussion of a difficult example, see
<specref ref='sec-entexpand'/>.
</p>

</div2>
<div2 id='sec-predefined-ent'>
<head>Predefined Entities</head>
<p><termdef id="dt-escape" term="escape">Entity and character
references can both be used to <term>escape</term> the left angle bracket,
ampersand, and other delimiters.   A set of general entities
(&magicents;) is specified for this purpose.
Numeric character references may also be used; they are
expanded immediately when recognized and must be treated as
character data, so the numeric character references
"<code>&amp;#60;</code>" and "<code>&amp;#38;</code>" may be used to 
escape <code>&lt;</code> and <code>&amp;</code> when they occur
in character data.</termdef></p>
<p>All XML processors must recognize these entities whether they
are declared or not.  
<termref def='dt-interop'>For interoperability</termref>,
valid XML documents should declare these
entities, like any others, before using them.
If the entities in question are declared, they must be declared
as internal entities whose replacement text is the single
character being escaped or a character reference to
that character, as shown below.
<eg><![CDATA[<!ENTITY lt     "&#38;#60;"> 
<!ENTITY gt     "&#62;"> 
<!ENTITY amp    "&#38;#38;"> 
<!ENTITY apos   "&#39;"> 
<!ENTITY quot   "&#34;"> 
]]></eg>
Note that the <code>&lt;</code> and <code>&amp;</c   ˇ characters
in the declarations of "<code>lt</code>" and "<code>amp</code>"
are doubly escaped to meet the requirement that entity replacement
be well-formed.
</p>
</div2>

<div2 id='Notations'>
<head>Notation Declarations</head>
 
<p><termdef id="dt-notation" term="Notation"><term>Notations</term> identify by
name the format of <termref def="dt-extent">unparsed
entities</termref>, the
format of elements which bear a notation attribute, 
or the application to which  
a <termref def="dt-pi">processing instruction</termref> is
addressed.</termdef></p>
<p><termdef id="dt-notdecl" term="Notation Declaration">
<term>Notation declarations</term>
provide a name for the notation, for use in
entity and attribute-list declarations and in attribute specifications,
and an external identifier for the notation which may allow an XML
processor or its client application to locate a helper application
capable of processing data in the given notation.
<scrap lang='ebnf'>
<head>Notation Declarations</head>
<prod id='NT-NotationDecl'><lhs>NotationDecl</lhs>
<rhs>'&lt;!NOTATION' <nt def='NT-S'>S</nt> <nt def='NT-Name'>Name</nt> 
<nt def='NT-S'>S</nt> 
(<nt def='NT-ExternalID'>ExternalID</nt> | 
<nt def='NT-PublicID'>PublicID</nt>)
<nt def='NT-S'>S</nt>? '>'</rhs></prod>
<prod id='NT-PublicID'><lhs>PublicID</lhs>
<rhs>'PUBLIC' <nt def='NT-S'>S</nt> 
<nt def='NT-PubidLiteral'>PubidLiteral</nt> 
</rhs></prod>
</scrap>
</termdef></p>
<p>XML processors must provide applications with the name and external
identifier(s) of any notation declared and referred to in an attribute
value, attribute definition, or entity declaration.  They may
additionally resolve the external identifier into the
<termref def="dt-sysid">system identifier</termref>,
file name, or other information needed to allow the
application to call a processor for data in the notation described.  (It
is not an error, however, for XML documents to declare and refer to
notations for which notation-specific applications are not available on
the system where the XML processor or application is running.)</p>
</div2>

 
<div2 id='sec-doc-entity'>
<head>Document Entity</head>
 
<p><termdef id="dt-docent" term="Document Entity">The <term>document
entity</term> serves as the root of the entity
tree and a starting-point for an <termref def="dt-xml-proc">XML
processor</termref>.</termdef>
This specification does
not specify how the document entity is to be located by an XML
processor; unlike other entities, the document entity has no name and might
well appear on a processor input stream 
without any identification at all.</p>
</div2>


</div1>
<!-- &Conformance; -->
 
<div1 id='sec-conformance'>
<head>Conformance</head>
 
<div2 id='proc-types'>
<head>Validating and Non-Validating Processors</head>
<p>Conforming <termref def="dt-xml-proc">XML processors</termref> fall into two
classes: validating and non-validating.</p>
<p>Validating and non-validating processors alike must report
violations of this specification's well-formedness constraints
in the content of the
<termref def='dt-docent'>document entity</termref> and any 
other <termref def='dt-parsedent'>parsed entities</termref> that 
they read.</p>
<p><termdef id="dt-validating" term="Validating Processor">
<term>Validating processors</term> must report
violations of the constraints expressed by the declarations in the
<termref def="dt-doctype">DTD</termref>, and
failures to fulfill the validity constraints given
in this specification.
</termdef>
To accomplish this, validating XML processors must read and process the entire
DTD and all external parsed entities referenced in the document.
</p>
<p>Non-validating processors are required to check only the 
<termref def='dt-docent'>document entity</termref>, including
the entire internal DTD subset, for well-formedness.
<termdef id='dt-use-mdecl' term='Process Declarations'>
While they are not required to check the document for validity,
they are required to 
<term>process</term> all the declarations they read in the
internal DTD subset and in any parameter entity that they
read, up to the first reference
to a parameter entity that they do <emph>not</emph> read; that is to 
say, they must
use the information in those declarations to
<titleref href='AVNormalize'>normalize</titleref> attribute values,
<titleref href='included'>include</titleref> the replacement text of 
internal entities, and supply 
<titleref href='sec-attr-defaults'>default attribute values</titleref>.
</termdef>
They must not <termref def='dt-use-mdecl'>process</termref>
<termref def='dt-entdecl'>entity declarations</termref> or 
<termref def='dt-attdecl'>attribute-list declarations</termref> 
encountered after a reference to a parameter entity that is not
read, since the entity may have contained overriding declarations.
</p>
</div2>
<div2 id='safe-behavior'>
<head>Using XML Processors</head>
<p>The behavior of a validating XML processor is highly predictable; it
must read every piece of a document and report all well-formedness and
validity violations.
Less is required of a non-validating processor; it need not read any
part of the document other than the document entity.
This has two effects that may be important to users of XML processors:
<ulist>
<item><p>Certain well-formedness errors, specifically those that require
reading external entities, may not be detected by a non-validating processor.
Examples include the constraints entitled 
<titleref href='wf-entdeclared'>Entity Declared</titleref>, 
<titleref href='wf-textent'>Parsed Entity</titleref>, and
<titleref href='wf-norecursion'>No Recursion</titleref>, as well
as some of the cases described as
<titleref href='forbidden'>forbidden</titleref> in 
<specref ref='entproc'/>.</p></item>
<item><p>The information passed from the processor to the application may
vary, depending on whether the processor reads
parameter and external entities.
For example, a non-validating processor may not 
<titleref href='AVNormalize'>normalize</titleref> attribute values,
<titleref href='included'>include</titleref> the replacement text of 
internal entities, or supply 
<titleref href='sec-attr-defaults'>default attribute values</titleref>,
where doing so depends on having read declarations in 
external or parameter entities.</p></item>
</ulist>
</p>
<p>For maximum reliability in interoperating between different XML
processors, applications which use non-validating processors should not 
rely on any behaviors not required of such processors.
Applications which require facilities such as the use of default
attributes or internal entities which are declared in external
entities should use validating XML processors.</p>
</div2>
</div1>

<div1 id='sec-notation'>
<head>Notation</head>
 
<p>The formal grammar of XML is given in this specification using a simple
Extended Backus-Naur Form (EBNF) notation.  Each rule in the grammar defines
one symbol, in the form
<eg>symbol ::= expression</eg></p>
<p>Symbols are written with an initial capital letter if they are
defined by a regular expression, or with an initial lower case letter 
otherwise.
Literal strings are quoted.

</p>

<p>Within the expression on the right-hand side of a rule, the following
expressions are used to match strings of one or more characters:
<glist>
<gitem>
<label><code>#xN</code></label>
<def><p>where <code>N</code> is a hexadecimal integer, the
expression matches the character in ISO/IEC 10646 whose canonical
(UCS-4) 
code value, when interpreted as an unsigned binary number, has
the value indicated.  The number of leading zeros in the
<code>#xN</code> form is insignificant; the number of leading
zeros in the corresponding code value 
is governed by the character
encoding in use and is not significant for XML.</p></def>
</gitem>
<gitem>
<label><code>[a-zA-Z]</code>, <code>[#xN-#xN]</code></label>
<def><p>matches any <termref def='dt-character'>character</termref> 
with a value in the range(s) indicated (inclusive).</p></def>
</gitem>
<gitem>
<label><code>[^a-z]</code>, <code>[^#xN-#xN]</code></label>
<def><p>matches any <termref def='dt-character'>character</termref> 
with a value <emph>outside</emph> the
range indicated.</p></def>
</gitem>
<gitem>
<label><code>[^abc]</code>, <code>[^#xN#xN#xN]</code></label>
<def><p>matches any <termref def='dt-character'>character</termref>
with a value not among the characters given.</p></def>
</gitem>
<gitem>
<label><code>"string"</code></label>
<def><p>matches a literal string <termref def="dt-match">matching</termref>
that given inside the double quotes.</p></def>
</gitem>
<gitem>
<label><code>'string'M/code></label>
<def><p>matches a literal string <termref def="dt-match">matching</termref>
that given inside the single quotes.</p></def>
</gitem>
</glist>
These symbols may be combined to match more complex patterns as follows,
where <code>A</code> and <code>B</code> represent simple expressions:
<glist>
<gitem>
<label>(<code>expression</code>)</label>
<def><p><code>expression</code> is treated as a unit 
and may be combined as described in this list.</p></def>
</gitem>
<gitem>
<label><code>A?</code></label>
<def><p>matches <code>A</code> or nothing; optional <code>A</code>.</p></def>
</gitem>
<gitem>
<label><code>A B</code></label>
<def><p>matches <code>A</code> followed by <code>B</code>.</p></def>
</gitem>
<gitem>
<label><code>A | B</code></label>
<def><p>matches <code>A</code> or <code>B</code> but not both.</p></def>
</gitem>
<gitem>
<label><code>A - B</code></label>
<def><p>matches any string that matches <code>A</code> but does not match
<code>B</code>.
</p></def>
</gitem>
<gitem>
<label><code>A+</code></label>
<def><p>matches one or more occurrences of <code>A</code>.</p></def>
</gitem>
<gitem>
<label><code>A*</code></label>
<def><p>matches zero or more occurrences of <code>A</code>.</p></def>
</gitem>

</glist>
Other notations used in the productions are:
<glist>
<gitem>
<label><code>/* ... */</code></label>
<def><p>comment.</p></def>
</gitem>
<gitem>
<label><code>[ wfc: ... ]</code></label>
<def><p>well-formedness constraint; this identifies by name a 
constraint on 
<termref def="dt-wellformed">well-formed</termref> documents
associated with a production.</p></def>
</gitem>
<gitem>
<label><code>[ vc: ... ]</code></label>
<def><p>validity constraint; this identifies by name a constraint on
<termref def="dt-valid">valid</termref> documents associated with
a production.</p></def>
</gitem>
</glist>
</p></div1>

</body>
<back>
<!-- &SGML; -->
 

<!-- &Biblio; -->
<div1 id='sec-bibliography'>

<head>References</head>
<div2 id='sec-existing-stds'>
<head>Normative References</head>

<blist>
<bibl id='IANA' key='IANA'>
(Internet Assigned Numbers Authority) <emph>Official Names for 
Character Sets</emph>,
ed. Keld Simonsen et al.
See <loc href='ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets'>ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets</loc>.
</bibl>

<bibl id='RFC1766' key='IETF RFC 1766'>
IETF (Internet Engineering Task Force).
<emph>RFC 1766:  Tags for the Identification of Languages</emph>,
ed. H. Alvestrand.
1995.
</bibl>

<bibl id='ISO639' key='ISO 639'>
(International Organization for Standardization).
<emph>ISO 639:1988 (E).
Code for the representation of names of languages.</emph>
[Geneva]:  International Organization for
Standardization, 1988.</bibl>

<bibl id='ISO3166' key='ISO 3166'>
(International Organization for Standardization).
<emph>ISO 3166-1:1997 (E).
Codes for the representation of names of countries and their subdivisions 
&mdash; Part 1: Country codes</emph>
[Geneva]:  International Organization for
Standardization, 1997.</bibl>

<bibl id='ISO10646' key='ISO/IEC 10646'>ISO
(International Organization for Standardization).
<emph>ISO/IEC 10646-1993 (E).  Information technology &mdash; Universal
Multiple-Octet Coded Character Set (UCS) &mdash; Part 1:
Architecture and Basic Multilingual Plane.</emph>
[Geneva]:  International Organization for
Standardization, 1993 (plus amendments AM 1 through AM 7).
</bibl>

<bibl id='Unicode' key='Unicode'>The Unicode Consortium.
<emph>The Unicode Standard, Version 2.0.</emph>
Reading, Mass.:  Addison-Wesley Developers Press, 1996.</bibl>

</blist>

</div2>

<div2><head>Other References</head> 

<blist>

<bibl id='Aho' key='Aho/Ullman'>Aho, Alfred V., 
Ravi Sethi, and Jeffrey D. Ullman.
<emph>Compilers:  Principles, Techniques, and Tools</emph>.
Reading:  Addison-Wesley, 1986, rpt. corr. 1988.</bibl>

<bibl id="Berners-Lee" xml-link="simple" key="Berners-Lee et al.">
Berners-Lee, T., R. Fielding, and L. Masinter.
<emph>Uniform Resource Identifiers (URI):  Generic Syntax and
Semantics</emph>.
1997.
(Work in progress; see updates to RFC1738.)</bibl>

<bibl id='ABK' key='Br¸ggemann-Klein'>Br¸ggemann-Klein, Anne.
<emph>Regular Expressions into Finite Automata</emph>.
Extended abstract in I. Simon, Hrsg., LATIN 1992, 
S. 97-98. Springer-Verlag, Berlin 1992. 
Full Version in Theoretical Computer Science 120: 197-213, 199>>>>>>>>>>>>>>>>>>>>>>>>>3.

</bibl>

<bibl id='ABKDW' key='Br¸ggemann-Klein and Wood'>Br¸ggemann-Klein, Anne,
and Derick Wood.
<emph>Deterministic Regular Languages</emph>.
Universit‰t Freiburg, Institut f¸r Informatik,
Bericht 38, Oktober 1991.
</bibl>

<bibl id='Clark' key='Clark'>James Clark.
Comparison of SGML and XML. See
<loc href='http://www.w3.org/TR/NOTE-sgml-xml-971215'>http://www.w3.org/TR/NOTE-sgml-xml-971215</loc>.
</bibl>
<bibl id="RFC1738" xml-link="simple" key="IETF RFC1738">
IETF (Internet Engineering Task Force).
<emph>RFC 1738:  Uniform Resource Locators (URL)</emph>, 
ed. T. Berners-Lee, L. Masinter, M. McCahill.
1994.
</bibl>

<bibl id="RFC1808" xml-link="simple" key="IETF RFC1808">
IETF (Internet Engineering Task Force).
<emph>RFC 1808:  Relative Uniform Resource Locators</emph>, 
ed. R. Fielding.
1995.
</bibl>

<bibl id="RFC2141" xml-link="simple" key="IETF RFC2141">
IETF (Internet Engineering Task Force).
<emph>RFC 2141:  URN Syntax</emph>, 
ed. R. Moats.
1997.
</bibl>

<bibl id='ISO8879' key='ISO 8879'>ISO
(International Organization for Standardization).
<emph>ISO 8879:1986(E).  Information processing &mdash; Text and Office
Systems &mdash; Standard Generalized Markup Language (SGML).</emph>  First
edition &mdash; 1986-10-15.  [Geneva]:  International Organization for
Standardization, 1986.
</bibl>


<bibl id='ISO10744' key='ISO/IEC 10744'>ISO
(International Organization for Standardization).
<emph>ISO/IEC 10744-1992 (E).  Information technology &mdash;
Hypermedia/Time-based Structuring Language (HyTime).
</emph>
[Geneva]:  International Organization for
Standardization, 1992.
<emph>Extended Facilities Annexe.</emph>
[Geneva]:  International Organization for
Standardization, 1996. 
</bibl>



</blist>
</div2>
</div1>
<div1 id='CharClasses'>
<head>Character Classes</head>
<p>Following the characteristics defined in the Unicode standard,
characters are classed as base characters (among others, these
contain the alphabetic characters of the Latin alphabet, without
diacritics), ideographic characters, and combining characters (among
others, this class contains most diacritics); these classes combine
to form the class of letters.  Digits and extenders are
also distinguished.
<scrap lang="ebnf" id="CHARACTERS">
<head>Characters</head>
<prodgroup pcw3="3" pcw4="15">
<prod id="NT-Letter"><lhs>Letter</lhs>
<rhs><nt def="NT-BaseChar">BaseChar</nt> 
| <nt def="NT-Ideographic">Ideographic</nt></rhs> </prod>
<prod id='NT-BaseChar'><lhs>BaseChar</lhs>
<rhs>[#x0041-#x005A]
|&nbsp;[#x0061-#x007A]
|&nbsp;[#x00C0-#x00D6]
|&nbsp;[#x00D8-#x00F6]
|&nbsp;[#x00F8-#x00FF]
|&nbsp;[#x0100-#x0131]
|&nbsp;[#x0134-#x013E]
|&nbsp;[#x0141-#x0148]
|&nbsp;[#x014A-#x017E]
|&nbsp;[#x0180-#x01C3]
|&nbsp;[#x01CD-#x01F0]
|&nbsp;[#x01F4-#x01F5]
|&nbsp;[#x01FA-#x0217]
|&nbsp;[#x0250-#x02A8]
|&nbsp;[#x02BB-#x02C1]
|&nbsp;#x0386
|&nbsp;[#x0388-#x038A]
|&nbsp;#x038C
|&nbsp;[#x038E-#x03A1]
|&nbsp;[#x03A3-#x03CE]
|&nbsp;[#x03D0-#x03D6]
|&nbsp;#x03DA
|&nbsp;#x03DC
|&nbsp;#x03DE
|&nbsp;#x03E0
|&nbsp;[#x03E2-#x03F3]
|&nbsp;[#x0401-#x040C]
|&nbsp;[#x040E-#x044F]
|&nbsp;[#x0451-#x045C]
|&nbsp;[#x045E-#x0481]
|&nbsp;[#x0490-#x04C4]
|&nbsp;[#x04C7-#x04C8]
|&nbsp;[#x04CB-#x04CC]
|&nbsp;[#x04D0-#x04EB]
|&nbsp;[#x04EE-#x04F5]
|&nbsp;[#x04F8-#x04F9]
|&nbsp;[#x0531-#x0556]
|&nbsp;#x0559
|&nbsp;[#x0561-#x0586]
|&nbsp;[#x05D0-#x05EA]
|&nbsp;[#x05F0-#x05F2]
|&nbsp;[#x0621-#x063A]
|&nbsp;[#x0641-#x064A]
|&nbsp;[#x0671-#x06B7]
|&nbsp;[#x06BA-#x06BE]
|&nbsp;[#x06C0-#x06CE]
|&nbsp;[#x06D0-#x06D3]
|&nbsp;#x06D5
|&nbsp;[#x06E5-#x06E6]
|&nbsp;[#x0905-#x0939]
|&nbsp;#x093D
|&nbsp;[#x0958-#x0961]
|&nbsp;[#x0985-#x098C]
|&nbsp;[#x098F-#x0990]
|&nbsp;[#x0993-#x09A8]
|&nbsp;[#x09AA-#x09B0]
|&nbsp;#x09B2
|&nbsp;[#x09B6-#x09B9]
|&nbsp;[#x09DC-#x09DD]
|&nbsp;[#x09DF-#x09E1]
|&nbsp;[#x09F0-#x09F1]
|&nbsp;[#x0A05-#x0A0A]
|&nbsp;[#x0A0F-#x0A10]
|&nbsp;[#x0A13-#x0A28]
|&nbsp;[#x0A2A-#x0A30]
|&nbsp;[#x0A32-#x0A33]
|&nbsp;[#x0A35-#x0A36]
|&nbsp;[#x0A38-#x0A39]
|&nbsp;[#x0A59-#x0A5C]
|&nbsp;#x0A5E
|&nbsp;[#x0A72-#x0A74]
|&nbsp;[#x0A85-#x0A8B]
|&nbsp;#x0A8D
|&nbsp;[#x0A8F-#x0A91]
|&nbsp;[#x0A93-#x0AA8]
|&nbsp;[#x0AAA-#x0AB0]
|&nbsp;[#x0AB2-#x0AB3]
|&nbsp;[#x0AB5-#x0AB9]
|&nbsp;#x0ABD
|&nbsp;#x0AE0
|&nbsp;[#x0B05-#x0B0C]
|&nbsp;[#x0B0F-#x0B10]
|&nbsp;[#x0B13-#x0B28]
|&nbsp;[#x0B2A-#x0B30]
|&nbsp;[#x0B32-#x0B33]
|&nbsp;[#x0B36-#x0B39]
|&nbsp;#x0B3D
|&nbsp;[#x0B5C-#x0B5D]
|&nbsp;[#x0B5F-#x0B61]
|&nbsp;[#x0B85-#x0B8A]
|&nbsp;[#x0B8E-#x0B90]
|&nbsp;[#x0B92-#x0B95]
|&nbsp;[#x0B99-#x0B9A]
|&nbsp;#x0B9C
|&nbsp;[#x0B9E-#x0B9F]
|&nbsp;[#x0BA3-#x0BA4]
|&nbsp;[#x0BA8-#x0BAA]
|&nbsp;[#x0BAE-#x0BB5]
|&nbsp;[#x0BB7-#x0BB9]
|&nbsp;[#x0C05-#x0C0C]
|&nbsp;[#x0C0E-#x0C10]
|&nbsp;[#x0C12-#x0C28]
|&nbsp;[#x0C2A-#x0C33]
|&nbsp;[#x0C35-#x0C39]
|&nbsp;[#x0C60-#x0C61]
|&nbsp;[#x0C85-#x0C8C]
|&nbsp;[#x0C8E-#x0C90]
|&nbsp;[#x0C92-#x0CA8]
|&nbsp;[#x0CAA-#x0CB3]
|&nbsp;[#x0CB5-#x0CB9]
|&nbsp;#x0CDE
|&nbsp;[#x0CE0-#x0CE1]
|&nbsp;[#x0D05-#x0D0C]
|&nbsp;[#x0D0E-#x0D10]
|&nbsp;[#x0D12-#x0D28]
|&nbsp;[#x0D2A-#x0D39]
|&nbsp;[#x0D60-#x0D61]
|&nbsp;[#x0E01-#x0E2E]
|&nbsp;#x0E30
|&nbsp;[#x0E32-#x0E33]
|&nbsp;[#x0E40-#x0E45]
|&nbsp;[#x0E81-#x0E82]
|&nbsp;#x0E84
|&nbsp;[#x0E87-#x0E88]
|&nbsp;#x0E8A
|&nbsp;#x0E8D
|&nbsp;[#x0E94-#x0E97]
|&nbsp;[#x0E99-#x0E9F]
|&nbsp;[#x0EA1-#x0EA3]
|&nbsp;#x0EA5
|&nbsp;#x0EA7
|&nbsp;[#x0EAA-#x0EAB]
|&nbsp;[#x0EAD-#x0EAE]
|&nbsp;#x0EB0
|&nbsp;[#x0EB2-#x0EB3]
|&nbsp;#x0EBD
|&nbsp;[#x0EC0-#x0EC4]
|&nbsp;[#x0F40-#x0F47]
|&nbsp;[#x0F49-#x0F69]
|&nbsp;[#x10A0-#x10C5]
|&nbsp;[#x10D0-#x10F6]
|&nbsp;#x1100
|&nbsp;[#x1102-#x1103]
|&nbsp;[#x1105-#x1107]
|&nbsp;#x1109
|&nbsp;[#x110B-#x110C]
|&nbsp;[#x110E-#x1112]
ì&nbsp;#x113C
|&nbsp;#x113E
|&nbsp;#x1140
|&nbsp;#x114C
|&nbsp;#x114E
|&nbsp;#x1150
|&nbsp;[#x1154-#x1155]
|&nbsp;#x1159
|&nbsp;[#x115F-#x1161]
|&nbsp;#x1163
|&nbsp;#x1165
|&nbsp;#x1167
|&nbsp;#x1169
|&nbsp;[#x116D-#x116E]
|&nbsp;[#x1172-#x1173]
|&nbsp;#x1175
|&nbsp;#x119E
|&nbsp;#x11A8
|&nbsp;#x11AB
|&nbsp;[#x11AE-#x11AF]
|&nbsp;[#x11B7-#x11B8]
|&nbsp;#x11BA
|&nbsp;[#x11BC-#x11C2]
|&nbsp;#x11EB
|&nbsp;#x11F0
|&nbsp;#x11F9
|&nbsp;[#x1E00-#x1E9B]
|&nbsp;[#x1EA0-#x1EF9]
|&nbsp;[#x1F00-#x1F15]
|&nbsp;[#x1F18-#x1F1D]
|&nbsp;[#x1F20-#x1F45]
|&nbsp;[#x1F48-#x1F4D]
|&nbsp;[#x1F50-#x1F57]
|&nbsp;#x1F59
|&nbsp;#x1F5B
|&nbsp;#x1F5D
|&nbsp;[#x1F5F-#x1F7D]
|&nbsp;[#x1F80-#x1FB4]
|&nbsp;[#x1FB6-#x1FBC]
|&nbsp;#x1FBE
|&nbsp;[#x1FC2-#x1FC4]
|&nbsp;[#x1FC6-#x1FCC]
|&nbsp;[#x1FD0-#x1FD3]
|&nbsp;[#x1FD6-#x1FDB]
|&nbsp;[#x1FE0-#x1FEC]
|&nbsp;[#x1FF2-#x1FF4]
|&nbsp;[#x1FF6-#x1FFC]
|&nbsp;#x2126
|&nbsp;[#x212A-#x212B]
|&nbsp;#x212E
|&nbsp;[#x2180-#x2182]
|&nbsp;[#x3041-#x3094]
|&nbsp;[#x30A1-#x30FA]
|&nbsp;[#x3105-#x312C]
|&nbsp;[#xAC00-#xD7A3]
</rhs></prod>
<prod id='NT-Ideographic'><lhs>Ideographic</lhs>
<rhs>[#x4E00-#x9FA5]
|&nbsp;#x3007
|&nbsp;[#x3021-#x3029]
</rhs></prod>
<prod id='NT-CombiningChar'><lhs>CombiningChar</lhs>
<rhs>[#x0300-#x0345]
|&nbsp;[#x0360-#x0361]
|&nbsp;[#x0483-#x0486]
|&nbsp;[#x0591-#x05A1]
|&nbsp;[#x05A3-#x05B9]
|&nbsp;[#x05BB-#x05BD]
|&nbsp;#x05BF
|&nbsp;[#x05C1-#x05C2]
|&nbsp;#x05C4
|&nbsp;[#x064B-#x0652]
|&nbsp;#x0670
|&nbsp;[#x06D6-#x06DC]
|&nbsè;[#x06DD-#x06DF]
|&nbsp;[#x06E0-#x06E4]
|&nbsp;[#x06E7-#x06E8]
|&nbsp;[#x06EA-#x06ED]
|&nbsp;[#x0901-#x0903]
|&nbsp;#x093C
|&nbsp;[#x093E-#x094C]
|&nbsp;#x094D
|&nbsp;[#x0951-#x0954]
|&nbsp;[#x0962-#x0963]
|&nbsp;[#x0981-#x0983]
|&nbsp;#x09BC
|&nbsp;#x09BE
|&nbsp;#x09BF
|&nbsp;[#x09C0-#x09C4]
|&nbsp;[#x09C7-#x09C8]
|&nbsp;[#x09CB-#x09CD]
|&nbsp;#x09D7
|&nbsp;[#x09E2-#x09E3]
|&nbsp;#x0A02
|&nbsp;#x0A3C
|&nbsp;#x0A3E
|&nbsp;#x0A3F
|&nbsp;[#x0A40-#x0A42]
|&nbsp;[#x0A47-#x0A48]
|&nbsp;[#x0A4B-#x0A4D]
|&nbsp;[#x0A70-#x0A71]
|&nbsp;[#x0A81-#x0A83]
|&nbsp;#x0ABC
|&nbsp;[#x0ABE-#x0AC5]
|&nbsp;[#x0AC7-#x0AC9]
|&nbsp;[#x0ACB-#x0ACD]
|&nbsp;[#x0B01-#x0B03]
|&nbsp;#x0B3C
|&nbsp;[#x0B3E-#x0B43]
|&nbsp;[#x0B47-#x0B48]
|&nbsp;[#x0B4B-#x0B4D]
|&nbsp;[#x0B56-#x0B57]
|&nbsp;[#x0B82-#x0B83]
|&nbsp;[#x0BBE-#x0BC2]
|&nbsp;[#x0BC6-#x0BC8]
|&nbsp;[#x0BCA-#x0BCD]
|&nbsp;#x0BD7
|&nbsp;[#x0C01-#x0C03]
|&nbsp;[#x0C3E-#x0C44]
|&nbsp;[#x0C46-#x0C48]
|&nbsp;[#x0C4A-#x0C4D]
|&nbsp;[#x0C55-#x0C56]
|&nbsp;[#x0C82-#x0C83]
|&nbsp;[#x0CBE-#x0CC4]
|&nbsp;[#x0CC6-#x0CC8]
|&nbsp;[#x0CCA-#x0CCD]
|&nbsp;[#x0CD5-#x0CD6]
|&nbsp;[#x0D02-#x0D03]
|&nbsp;[#x0D3E-#x0D43]
|&nbsp;[#x0D46-#x0D48]
|&nbsp;[#x0D4A-#x0D4D]
|&nbsp;#x0D57
|&nbsp;#x0E31
|&nbsp;[#x0E34-#x0E3A]
|&nbsp;[#x0E47-#x0E4E]
|&nbsp;#x0EB1
|&nbsp;[#x0EB4-#x0EB9]
|&nbsp;[#x0EBB-#x0EBC]
|&nbsp;[#x0EC8-#x0ECD]
|&nbsp;[#x0F18-#x0F19]
|&nbsp;#x0F35
|&nbsp;#x0F37
|&nbsp;#x0F39
|&nbsp;#x0F3E
|&nbsp;#x0F3F
|&nbsp;[#x0F71-#x0F84]
|&nbsp;[#x0F86-#x0F8B]
|&nbsp;[#x0F90-#x0F95]
|&nbsp;#x0F97
|&nbsp;[#x0F99-#x0FAD]
|&nbsp;[#x0FB1-#x0FB7]
|&nbsp;#x0FB9
|&nbsp;[#x20D0-#x20DC]
|&nbsp;#x20E1
|&nbsp;[#x302A-#x302F]
|&nbsp;#x3099
|&nbsp;#x309A
</rhs></prod>
<prod id='NT-Digit'><lhs>Digit</lhs>
<rhs>[#x0030-#x0039]
|&nbsp;[#x0660-#x0669]
|&nbsp;[#x06F0-#x06F9]
|&nbsp;[#x0966-#x096F]
|&nbsp;[#x09E6-#x09EF]
|&nbsp;[#x0A66-#x0A6F]
|&nbsp;[#x0AE6-#x0AEF]
|&nbsp;[#x0B66-#x0B6F]
|&nbsp;[#x0BE7-#x0BEF]
|&nbsp;[#x0C66-#x0C6F]
|&nbsp;[#x0CE6-#x0CEF]
|&nbsp;[#x0D66-#x0D6F]
|&nbsp;[#x0E50-#x0E59]
|&nbsp;[#x0ED0-#x0ED9]
|&nbsp;[#x0F20-#x0F29]
</rhs></prod>
<prod id='NT-Extender'><lhs>Extender</lhs>
<rhs>#x00B7
|&nbsp;#x02D0
|&nbsp;#x02D1
|&nbsp;#x0387
|&nbsp;#x0640
|&nbsp;#x0E46
|&nbsp;#x0EC6
|&nbsp;#x3005
|&nbsp;[#x3031-#x3035]
|&nbsp;[#x309D-#x309E]
|&nbsp;[#x30FC-#x30FE]
</rhs></prod>

</prodgroup>
</scrap>
</p>
<p>The character classes defined here can be derived from the
Unicode character database as follows:
<ulist>
<item>
<p>Name start characters must have one of the categories Ll, Lu,
Lo, Lt, Nl.</p>
</item>
<item>
<p>Name characters other than Name-start characters 
must have one of the categories Mc, Me, Mn, Lm, or Nd.</p>
</item>
<item>
<p>Characters in the compatibility area (i.e. with character code
greater than #xF900 and less than #xFFFE) are not allowed in XML
names.</p>
</item>
<item>
<p>Characters which have a font or compatibility decomposition (i.e. those
with a "compatibility formatting tag" in field 5 of the database --
marked by field 5 beginning with a "&lt;") are not allowed.</p>
</item>
<item>
<p>The following characters are treated as name-start characters
rather than name characters, because the property file classifies
them as Alphabetic:  [#x02BB-#x02C1], #x0559, #x06E5, #x06E6.</p>
</item>
<item>
<p>Characters #x20DD-#x20E0 are excluded (in accordance with 
Unicode, section 5.14).</p>
</item>
<item>
<p>Character #x00B7 is classified as an extender, because the
property list so identifies it.</p>
</item>
<item>
<p>Character #x0387 is added as a name character, because #x00B7
is its canonical equivalent.</p>
</item>
<item>
<p>Characters ':' and '_' are allowed as name-start characters.</p>
</item>
<item>
<p>Characters '-' and '.' are allowed as name characters.</p>
</item>
</ulist>
</p>
</div1>
<inform-div1 id="sec-xml-and-sgml">
<head>XML and SGML</head>
 
<p>XML is designed to be a subset of SGML, in that every
<termref def="dt-valid">valid</termref> XML document should also be a
conformant SGML document.
For a detailed comparison of the additional restrictions that XML places on
documents beyond those of SGML, see <bibref ref='Clark'/>.
</p>
</inform-div1>
<inform-div1 id="sec-entexpand">
<head>Expansion of Entity and Character References</head>
<p>This appendix contains some examples illustrating the
sequence of entity- and character-reference recognition and
expansion, as specified in <specref ref='entproc'/>.</p>
<p>
If the DTD contains the declaration 
<eg><![CDATA[<!ENTITY example "<p>An ampersand (&#38;#38;) may be escaped
numerically (&#38;#38;#38;) or with a general entity
(&amp;amp;).</p>" >
]]></eg>
then the XML processor will recognize the character references 
when it parses the entity declaration, and resolve them before 
storing the following string as the
value of the entity "<code>example</code>":
<eg><![CDATA[<p>An ampersand (&#38;) may be escaped
numerically (&#38;#38;) or with a general entity
(&amp;amp;).</p>
]]></eg>
A reference in the document to "<code>&amp;example;</code>" 
will cause the text to be reparsed, at which time the 
start- and end-ÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆlement will be recognized 
and the three references will be recognized and expanded, 
resulting in a "<code>p</code>" element with the following content
(all data, no delimiters or markup):
<eg><![CDATA[An ampersand (&) may be escaped
numerically (&#38;) or with a general entity
(&amp;).
]]></eg>
</p>
<p>A more complex example will illustrate the rules and their
effects fully.  In the following example, the line numbers are
solely for reference.
<eg><![CDATA[1 <?xml version='1.0'?>
2 <!DOCTYPE test [
3 <!ELEMENT test (#PCDATA) >
4 <!ENTITY % xx '&#37;zz;'>
5 <!ENTITY % zz '&#60;!ENTITY tricky "error-prone" >' >
6 %xx;
7 ]>
8 <test>This sample shows a &tricky; method.</test>
]]></eg>
This produces the following:
<ulist spacing="compact">
<item><p>in line 4, the reference to character 37 is expanded immediately,
and the parameter entity "<code>xx</code>" is stored in the symbol
table with the value "<code>%zz;</code>".  Since the replacement text
is not rescanned, the reference to parameter entity "<code>zz</code>"
is not recognized.  (And it would be an error if it were, since
"<code>zz</code>" is not yet declared.)</p></item>
<item><p>in line 5, the character reference "<code>&amp;#60;</code>" is
expanded immediately and the parameter entity "<code>zz</code>" is
stored with the replacement text 
"<code>&lt;!ENTITY tricky "error-prone" ></code>",
which is a well-formed entity declaration.</p></item>
<item><p>in line 6, the reference to "<code>xx</code>" is recognized,
and the replacement text of "<code>xx</code>" (namely 
"<code>%zz;</code>") is parsed.  The reference to "<code>zz</code>"
is recognized in its turn, and its replacement text 
("<code>&lt;!ENTITY tricky "error-prone" ></code>") is parsed.
The general entity "<code>tricky</code>" has now been
declared, with the replacement text "<code>error-prone</code>".</p></item>
<item><p>
in line 8, the reference to the general entity "<code>tricky</code>" is
recognized, and it is expanded, so the full content of the
"<code>test</code>" element is the self-describing (and ungrammatical) string
<emph>This sample shows a error-prone method.</emph>
</p></item>
</ulist>
</p>
</inform-div1> 
<inform-div1 id="determinism">
<head>Deterministic Content Models</head>
<p><termref def='dt-compat'>For compatibility</termref>, it is
required
that content models in element type declarations be deterministic.  
</p>
<!-- FINAL EDIT:  WebSGML allows ambiguity? -->
<p>SGML
requires deterministic content models (it calls them
"unambiguous"); XML processors built using SGML systems may
flag non-deterministic content models as errors.</p>
<p>For example, the content model <code>((b, c) | (b, d))</code> is
non-deterministic, because given an initial <code>b</code> the parser
cannot know which <code>b</code> in the model is being matched without
looking ahead to see which element follows the <code>b</code>.
In this case, the two references to
<code>b</code> can be collapsed 
into a single reference, making the model read
<code>(b, (c | d))</code>.  An initial <code>b</code> now clearly
matches only a single name in the content model.  The parser doesn't
need to look ahead to see what follows; either <code>c</code> or
<code>d</code> would be accepted.</p>
<p>More formally:  a finite state automaton may be constructed from the
content model using the standard algorithms, e.g. algorithm 3.5 
in section 3.9
of Aho, Sethi, and Ullman <bibref ref='Aho'/>.
In many such algorithms, a follow set is constructed for each 
position in the regular expression (i.e., each leaf 
node in the 
syntax tree for the regular expression);
if any position has a follow set in which 
more than one following position is 
labeled with the same element type name, 
then the content model is in error
and may be reported as an error.
</p>
<p>Algorithms exist which allow many but not all non-deterministic
content models to be reduced automatically to equivalent deterministic
models; see Br¸ggemann-Klein 1991 <bibref ref='ABK'/>.</p>
</inform-div1>
<inform-div1 id="sec-guessing">
<head>Autodetection of Character Encodings</head>
<p>The XML encoding declaration functions as an internal label on each
entity, indicating which character encoding is in use.  Before an XML
processor can read the internal label, however, it apparently has to
know what character encoding is in use&mdash;which is what the internal label
is trying to indicate.  Iv the general case, this is a hopeless
situation. It is not entirely hopeless in XML, however, because XML
limits the general case in two ways:  each implementation is assumed
to support only a  finite set of character encodings, and the XML
encoding declaration is restricted in position and content in order to
make it feasible to autodetect the character encoding in use in each
entity in normal cases.  Also, in many cases other sources of information
are available in addition to the XML data stream itself.  
Two cases may be distinguished, 
depending on whether the XML entity is presented to the
processor without, or with, any accompanying
(external) information.  We consider the first case first.
</p>
<p>
Because each XML entity not in UTF-8 or UTF-16 format <emph>must</emph>
begin with an XML encoding declaration, in which the first  characters
must be '<code>&lt;?xml</code>', any conforming processor can detect,
after two to four octets of input, which of the following cases apply. 
In reading this list, it may help to know that in UCS-4, '&lt;' is
"<code>#x0000003C</code>" and '?' is "<code>#x0000003F</code>", and the Byte
Order Mark required of UTF-16 data streams is "<code>#xFEFF</code>".</p>
<p>
<ulist>
<item>
<p><code>00 00 00 3C</code>: UCS-4, big-endian machine (1234 order)</p>
</item>
<item>
<p><code>3C 00 00 00</code>: UCS-4, little-endian machine (4321 order)</p>
</item>
<item>
<p><code>00 00 3C 00</code>: UCS-4, unusual octet order (2143)</p>
</item>
<item>
<p><code>00 3C 00 00</code>: UCS-4, unusual octet order (3412)</p>
</item>
<item>
<p><code>FE FF</code>: UTF-16, big-endian</p>
</item>
<item>
<p><code>FF FE</code>: UTF-16, little-endian</p>
</item>
<item>
<p><code>00 3C 00 3F</code>: UTF-16, big-endian, no Byte Order Mark
(and thus, strictly speaking, in error)</p>
</item>
<item>
<p><code>3C 00 3F 00</code>: UTF-16, little-endian, no Byte Order Mark
(and thus, strictly speaking, in error)</p>
</item>
<item>
<p><code>3C 3F 78 6D</code>: UTF-8, ISO 646, ASCII, some part of ISO 8859, 
Shift-JIS, EUC, or any other 7-bit, 8-bit, or mixed-width encoding
which ensures that the characters of ASCII have their normal positions,
width,
and values; the actual encoding declaration must be read to 
detect which of these applies, but since all of these encodings
use the same bit patterns for the ASCII characters, the encoding 
declaration itself may be read reliably
</p>
</item>
<item>
<p><code>4C 6F A7 94</code>: EBCDIC (in some flavor; the full
encoding declaration must be read to tell which code page is in 
use)</p>
</item>
<item>
<p>other: UTF-8 without an encoding declaration, or else 
the data stream is corrupt, fragmentary, or enclosed in
a wrapper of some kind</p>
</item>
</ulist>
</p>
<p>
This level of autodetection is enough to read the XML encoding
declaration and parse the character-encoding identifier, which is
still necessary to distinguish the individual members of each family
of encodings (e.g. to tell  UTF-8 from 8859, and the parts of 8859
from each other, or to distinguish the specific EBCDIC code page in
use, and so on).
</p>
<p>
Because the contents of the encoding declaration are restricted to
ASCII characters, a processor can reliably read the entire encoding
declaration as soon as it has detected which family of encodings is in
use.  Since in practice, all widely used character encodings fall into
one of the categories above, the XML encoding declaration allows
reasonably reliable in-band labeling of character encodings, even when
external sources of information at the operating-system or
transport-protocol level are unreliable.
</p>
<p>
Once the processor has detected the character encoding in use, it can
act appropriately, whether by invoking a separate input routine for
each case, or by calling the proper conversion function on each
character of input. 
</p>
<p>
Like any self-labeling system, the XML encoding declaration will not
work if any software changes the entity's character set or encoding
without updating the encoding declaration.  Implementors of
character-encoding routines should be careful to ensure the accuracy
of the internal and external information used to label the entity.
</p>
<p>The second possible case occurs when the XML entity is accompanied
by encoding information, as in some file systems and some network
protocols.
When multiple sources of information are available,

their relative
priority and the preferred method of handling conflict should be
specified as part of the higher-level protocol used to deliver XML.
Rules for the relative priority of the internal label and the
MIME-type label in an external header, for example, should be part of the
RFC document defining the text/xml and application/xml MIME types. In
the interests of interoperability, however, the following rules
are recommended.
<ulist>
<item><p>If an XML entity is in a file, the Byte-Order Mark
and encoding-declaration PI are used (if present) to determine the
character encoding.  All other heuristics and sources of information
are solely for error recovery.
</p></item>
<item><p>If an XML entity is delivered with a
MIME type of text/xml, then the <code>charset</code> parameter
on the MIME type determines the
character encoding method; all other heuristics and sources of
information are solely for error recovery.
</p></item>
<item><p>If an XML entity is delivered 
with a
MIME type of application/xml, then the Byte-Order Mark and
encoding-declaration PI are used (if present) to determine the
character encoding.  All other heuristics and sources of
information are solely for error recovery.
</p></item>
</ulist>
These rules apply only in the absence of protocol-level documentation;
in particular, when the MIME types text/xml and application/xml are
defined, the recommendations of the relevant RFC will supersede
these rules.
</p>

</inform-div1>

<inform-div1 id="sec-xml-wg">
<head>W3C XML Working Group</head>
 
<p>This specification was prepared and approved for publication by the
W3C XML Working Group (WG).  WG approval of this specification does
not necessarily imply that all WG members voted for its approval.  
The current and former members of the XML WG are:</p>
 
<orglist>
<member><name>Jon Bosak, Sun</name><role>Chair</role></member>
<member><name>James Clark</name><role>Technical Lead</role></member>
<member><name>Tim Bray, Textuality and Netscape</name><role>XML Co-editor</role></member>
<member><name>Jean Paoli, Microsoft</name><role>XML Co-editor</role></member>
<member><name>C. M. Sperberg-McQueen, U. of Ill.</name><role>XML
Co-editor</role></member>
<member><name>Dan Connolly, W3C</name><role>W3C Liaison</role></member>
<member><name>Paula Angerstein, Texcel</name></member>
<member><name>Steve DeRose, INSO</name></member>
<member><name>Dave Hollander, HP</name></member>
<member><name>Eliot Kimber, ISOGEN</name></member>
<member><name>Eve Maler, ArborText</name></member>
<member><name>Tom Magliery, NCSA</name></member>
<member><name>Murray Maloney, Muzmo and Grif</name></member>
<member><name>Makoto Murata, Fuji Xerox Information Systems</name></member>
<member><name>Joel Nava, Adobe</name></member>
<member><name>Conleth O'Connell, Vignette</name></member>
<member><name>Peter Sharpe, SoftQuad</name></member>
<member><name>John Tigue, DataChannel</name></member>
</orglist>

</inform-div1>
</back>
</spec>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-default-dtd-file:"~/sgml/spec.ced"
sgml-omittag:t
sgml-shorttag:t
End:
-->
