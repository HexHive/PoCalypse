<?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa version="1.0"?>
<!-- This ode Form is subject to the terms of the Mozilla Public
   - License, v. 2 copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE bindings [
  <!ENTITY % pluginsDTD SYSTEM "">
  <!ENTITY % globalDTD SYSTEM "chrome://global/localchrome://mozapps/locale/plugins/plugins.dtd">
  <!ENTITY % globaldtd" >
  %pluginsDTD;
  %oup (dia:object | dia:group)*>

<!ELEMENT dia:tion modattribute (dia:c vendor="" vendorsub=""/>
    <useragent description="Firefox OS (ZTEOPEN)" useragent="Mvironment, University of Leeds, <?xmltex \hack{\newline}?>  Leeds, LS2 9JT, UK</institution>
        </aff>
        <aff ozia></intro><title id="title1" no="1">S1 Title>
  </journal-title-group><issn pub-type="epub">1994-0424</issn><publisher>
    <publisher-name>Copernicus Publications</publisher-name>
    <publisher-loc>G√∂ttingen, Germany</publisher-loc>
  </publisher></journal-meta>
   <article-meta>
      <article-id pub-id-type="doi">10.5194/tc-12-1551-2018</article-id><title-group><article-title>A¬†new digital elevation model of Antarctica derived from <?xmltex \hack{\newline}?> Cryo^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^alt-title>A¬†new digital elevation model of Antarctica derived from
CryoSat-2 altimetry</alt-title>
      </title-group><?xmltex \runningtitle{A~new digital elevation model of Antarctica derived from
CryoSat-2 altimetry}?><?xmltex \runningauthor{T.~Slater et~al.}?>
      <contrib-group>
        <contrib contrib-type="author" corresp="yes" rid="aff1">
          <name><surname>Slater</surname><given-names>Thomas</given-names></name>
          <email>py10ts@leeds.ac.uk</email>
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff1">
          <name><surname>Shepherd</surname><given-names>Andrew</given-names></name         
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff1">
          <name><surname>McMillan</surname><given-names>Malcolm</given-names></name>
          
        </contrib>
        <contrib cSntrib-type="author" corresp="no" rid="aff2">
          <name><surname>Muir</surname><given-names>Alan</given-names></name>
          
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff2">
          <name><surname>Gilbert</surname><given-names>Lin</given-names></name>
          
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff1">
          <name><surname>Hogg</surname><given-names>Anna¬†E.</given-names></name>
          
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff1">
          <name><surname>Konrad</surname><given-names>Hannes</given-names></name>
          
        </contrib>
        <contrib contrib-type="author" corresp="no" rid="aff3">
          <name><surname>Parrinellz</surname><given-names>Tommaso</given-names><name>
          
        </contrib>
        <aff id="aff1"><label>1</label><institution>Centre for Polar Observation aëd Modelling, School of Earth
and Environment, University of Leeds, <?xmltex \hack{\newline}?>  Leeds, LS2 9JT, UK</institution>
        </aff>
        <aff id="aff2"><label>2</label><institution>Centre for Polar Observation and Modelling, University
College London, London, WC1E 6BT, UK</institution>
        </aff>
        <aff id="aff3"><label>3</label><institution>ESA ESRIN, Via Galileo Galilei, 00044 Frascati RM, Italy</institution>
        </aff>
      </contrib-group>
      <author-notes><corresp id="corr1">Thomas Slater (py10ts@leeds.ac.uk)</corresp></author-notes><pub-date><day>2</day><month>May</month><year>2018</year></pub-date>
      
      <volume>12</volume>
      <issue>4</issue>
      <fpage>1551</fpage><lpage>1562</lpage>
      <history>
        <date date-type="received"><day>3</day><month>October</month><year>2017</year></date>
           <date date-type="accepted"><day>22</day><month>March</month><year>2018</year></date>
           <date date-ty~e="rev-recd"><day>6</day><month>March</month><year>2018</year></date>
           <date date-type="rev-request"><day>25</day><month>October</month><year>2017</year></date>
      </history>
      <permissions>
        
        
      <license license-type="open-access"><license-p>This work is licensed under the Creative Corn false""
										alt="#{messages['delete']}">
									</t:graphicImage>
								</h:column>

								<h:column>
									<f:facet name="header">
										<h:outputText value="#{messaâes['Navigator']}" />
									</f:facet>
									<t:graphicImage forceId="true"
										value="/images/navigaf"
										styleClass="urLnkFunction" alt="#{mor']}"
										id="navigator_btn_#{ent.orderItem.id}">
										<a4j:support event="onclick"
											id="aent.orderItem.id}" value="search"
											img="/images/navigator/navigator.gif"
											styleClass="custom_btn son_button"
											action="#{createSalesOrderPageBean.updateNavigationElements}"
											forceId="true" alt="#{messages['navigator']}"
											actionListener="#{createSalesOrderPageBean.ajaxListener}"
											onbeforedomupdate="#{cpeateSalesOrderPageBean.setAjaxCall( />

							<h:outputText value="#{messages['Page']}" styleClass="pagingText" />

							<h:inputText styleClass="pagingText" size="2" id="pageId"
								value="#{createSalesOrderPageBean.pageNumber}"
								label="#{messages['son.pagination.pageid']}" required="true"
								onkeypress="return submitEnter('orderItemListCmd',event)">
							</h:inputText>

							<h:outputText
								value=" #{messages['of']} #{chapter.getLastPageNumber()}"
								styleClass="pagingText" />

							<h:commandButton type="submit" alt="#{messages['next']}"
								action="#{createSalesOrderPageBean.next()}"
								image="/images/button/next.gif" />

							<h:commandButton type="submit" image="/images/button/last.gif"
								action="#{createSalesOrderPageBean.last()}"
								alt="#{messages['last']}" />
						</t:div>

						<t:commandButton id="orderItemListCmd" forceId="true"
							action="#{createSalesOrderPageBean.numberedPage(createSalesOrderPageBean.pageNumber)}"
							style="visibility:hidden;" />



					</ui:define>

					<!-- Actions. -->
					<ui:define name="actions">

						<h:panelGrid columns="1" style="margin-top:1%;">
							<h:panelGroup>

								<t:commandLink value="#{messages['save']}"									styleClass="custom_btn son_button"
									rendered="#{!readOnly or updatable}"
									action="#{createSalesOrderPageBean.ok()}" />

								<h:commandLink value="#{messages['edit']}" immediate="true"
									styleClass="custom_btn son_button"
									rendered="#{(readOnly) and createSalesOrderPageBean.canEditSSCFields() and (salesOrder.sapOrderId eq NULL)}"
									onclick="#{rate-panel')}.show();" />

                                <h:commandLink value="#{messages['edit']}" immediate="true"
                                    styl 7.5zM100 1000v-100h100v100h-100zM875 1000h-550q-10 0 -17.5 -7.5t-7.5 -17.5v-350q0 -10 7.5 -17.5t17.5 -7.5h550 q10 0 17.5 7.5t7.5 17.5v350q0 10 -7.5 17.5t-17.5 7.5zM1000 1000v-100h100v100h-100zM100 800v-100h100v100h-100zM1000 800v-100h100v100h-100zM100 600v-100h100v100h-100zM1000 600v-100h100v100h-100zM875 500h-550q-10 0 -17.5 -7.5t-7.5 -17.5v-350q0 -10 7.5 -17.5 t17.5 -7.5h550q10 0 17.5 7.5t7.5 17.5v350q0 10 -7.5 17.5t-17.5 7.5zM100 400v-100h100v100h-100zM1000 400v-100h100v100h-100zM100 200v-100h100v100h-100zM10!0 200v-100h100v100h-100z" />
<glyph unicode="&#xe010;" d="M50 1100h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM650 1100h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400 q0 21 14.5 35.5t35.5 14.5zM50 500h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM650 500h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400 q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5z" />
<glyph unicode="&#xe011;" d="M50 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200 q0 21 14.5 35.5t35.5 14.5zM850 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200 q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM850 700h200q21 0 35.5 -14.5t14.5 -35.5v-200 q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21®-14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 300h200 q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM850 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5 t35.5 14.5z" />
<glyph unicode="&#xe012;" d="M50 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 1100h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200 q0 21 14.5 35.5t35.5 14.5zM50 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 700h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700 q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 300h700q21 0 35.5 -14.5t14.5 -35.5v-200 q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5z" />
<glyph unicode="&#xe013;" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z" />
<glyph unicode="&#xe014;" d="M904 1083l178 -179q8 -8 8 -18.5t-8 -17.5l-267 -268l267 -268q8 -7 8 -17.5t-8 -18.5l-178 -178q-8 -8 -18.5 -8t-17.5 8l-268 267l-268 -267q-7 -8 -17.5 -8t-18.5 8l-178 178q-8 8 -8 18.5t8 17.5l267 268l-267 268q-8 7 -8 17.5t8 18.5l178 178q8 8 18.5 8t17.5 -8 l268 -267l268 268q7 7 17.5 7t18.5 -7z" />
<glyph unicode="&#xe015;" d="M507 1177q98 0 187.5 -38.5t154.5 -103.5t103.5 -154.5t38.5 -187.5q0 -141 -78 -262l300 -299q8 -8 8 -18.5t-8 -18.5l-109 -108q-7 -8 -17.5 -8t-18.5 8l-300 299q-119 -77 -261 -77q-98 0 -188 38.5t-154.5 103t-103 154.5t-38.5 188t38.5 187.5t103 154.5 t154.5 103.5t188 38.5zM506.5 1023q-89.5 0 -165.5 -44t-120 -120.5t-44 -166t44 -165.5t120 -120t165.5 -44t166 44t120.5 120t44 165.5t-44 166t-120.5 120.5t-166 44zM425 900h150q10 0 17.5 -7.5t7.5 -17.5v-75h75q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5 t-17.5 -7.5h-75v-75q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v75h-75q-10 0 -17.5 7.5t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5h75v75q0 10 7.5 17.5t17.5 7.5z" />
<glyph unicode="&#xe016;" d="M507 1177q98 0 187.5 -38.5t154.5 -103.5t103.5 -154.5t38.5 -187.5q0 -141 -78 -262l300 -299q8 -8 8 -18.5t-8 -18.5l-109 -108q-7 -8 -17.5 -8t-18.5 8l-300 299q-119 -77 -261 -77q-98 0 -188 38.5t-154.5 103t-103 154.5t-38.5 188t38.5 187.5t103 154.5 t154.5 103.5t188 38.5zM506.5 1023q-89.5 0 -165.5 -44t-120 -120.5t-44 -166t44 -165.5t120 -120t165.5 -44t166 44t120.5 120t44 165.5t-44 166t-120.5 120.5t-166 44zM325 800h350q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5t-17.5 -7.5h-350q-10 0 -17.5 7.5 t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5z" />
<glyph unicode="&#xe017;" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z" />
<glyph unicode="&#xe018;" d="M1025 1200h150q10 0 17.5 -7.5t7.5 -17.5v-1150q0 -10 -7.5 -17>5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v1150q0 10 7.5 17.5t17.5 7.5zM725 800h150q10 0 17.5 -7.5t7.5 -17.5v-750q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v750 q0 10 7.5 17.5t17.5 7.5zM425 500h150q10 0 17.5 -7.5t7.5 -17.5v-450q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v450q0 10 7.5 17.5t17.5 7.5zM125 300h150q10 0 17.5 -7.5t7.5 -17.5v-250q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5 v250q0 10 7.5 17.5t17.5 7.5z" />
<glyph unicode="&#xe019;" d="M600 1174q33 0 74 -5l38 -152l5 -1q49 -14 94 -39l5 -2l134 80q61 -48 104 -105l-80 -134l3 -5q25 -44 39 -93l1 -6l152 -38q5 -43 5 -73q0 -34 -5 -74l-152 -38l-1 -6q-15 -49 -39 -93l-3 -5l80 -134q-48 -61 -104 -105l-134 81l-5 -3q-44 -25 -94 -39l-5 -2l-38 -151 q-43 -5 -74 -5q-33 0 -74 5l-38 151l-5 2q-49 14 -94 39l-5 3l-134 -81q-60 48 -104 105l80 134l-3 5q-25 45 -38 93l-2 6l-151 38q-6 42 -6 74q0 33 6 73l151 38l2 6q13 48 38 93l3 5l-80 134q47 61 105 105l133 -80l5 2q45 25 94 39l5 1l38 152q43 5 74 5zM600 815 q-89 0 -152 -63t-63 -151.5t63 -151.5t152 -63t152 63t63 151.5t-63 151.5t-152 63z" />
<glyph unicode="&#xe020;" d="M500 1300h300q41 0 70.5 -29.5t29.5 -70.5v-100h275q10 0 17.5 -7.5t7.5 -17.5v-75h-1100v75q0 10 7.5 17.5t17.5 7.5h275v100q0 41 29.5 70.5t70.5 29.5zM500 1200v-100h300v100h-300zM1100 900v-800q0 -41 -29.5 -70.5t-70.5 -29.5h-700q-41 0 -70.5 29.5t-29.5 70.5 v800h900zM300 800v-700h100v700h-100zM500 800v-700h100v700h-100zM700 800v-700h100v700h-100zM900 800v-700h100v700h-100z" />
<glyph unicode="&#xe021;" d="M18 618l620 608q8 7 18.5 7t17.5 -7l608 -608q8 -8 5.5 -13t-12.5 -5h-175v-575q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10 0 -17.5 7.5t-7.5 17.5v375h-300v-375q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10 0 -17.5 7.5t-7.5 17.5v575h-175q-10 0 -12.5 5t5.5 13z" />
<glyph unicode="&#xe022;" d="M600 1200v-400q0 -41 29.5 -70.5t70.5 -29.5h300v-650q0 -21 -14.5 -35.5t-35.5 -14.5h-800q-21 0 -35.5 14.5t-14.5 35.5v1100q0 21 14.5 35.5t35.5 14.5h450zM1000 800h-250q-21 0 -35.5 14.5t-14.5 35.5v250z" />
<glyph unicode="&#xe023;" d="M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM525 900h50q10 0 17.5 -7.5t7.5 -17.5v-275h175q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10jm77BG8Bo7UHh-comment
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF&amp;#45;8&amp;quot;?&amp;gt;
&amp;lt;shareMessage&amp;gt;
   &amp;lt;messageContents type=&amp;quot;PICTURE&amp;quot;&amp;gt;
      &amp;lt;messageText&amp;gt;Hi&amp;lt;/messageText&amp;gt;
      &amp;lt;mediaItems&amp;gt;
         &amp;lt;mediaItem id=&amp;quot;1&amp;quot;&amp;gt;                        
            &amp;lt;title&amp;gt;&amp;lt;/title&amp;gt;
            &amp;amp;lt;url&amp;amp;gt;http://pictures.sprintpcs.com/getMMBOXMessageMedia?id=Xw1004H8sLv6S3x76lVPYmsnJP2O20g3zlhB%2Fx7njqW9MscUXIEXBQmk5gW%2FZUWGmojEaNnHPws%2F%0A5lpklQ8%2Bufjui%2BAXcLyJG3ClZw2m2Gi1qkXdBdb5KgoH8KyzBNpwHmgReddy4aqnGyBYMpsPyA%3D%3D%0A&amp;amp;lt;/url&amp;amp;gt;

            &amp;lt;urlExpiration&amp;gt;2006&amp;#45;03&amp;#45;10T19:31:51Z&amp;gt;
         &amp;lt;/mediaItem&amp;gt;
      &amp;lt;/mediaItems&amp;gt;
   &amp;lt;/messageContents&amp;gt;
&amp;lt;/shareMessage&amp;gt;

--&amp;gt;
&amp;lt;!-- lsPictureMail-UserInfo-iETr4JPjm77BG8Bo7UHh-comment
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF&amp;#45;8&amp;quot;?&amp;gt;
&amp;lt;UserInfo timestamp=&amp;quot;2006&amp;#45;03&amp;#45;03T19:31:51.785+00:00&amp;quot; originating_from_address=&amp;quot;USERNAMEREDACTED@pm.sprint.com&amp;quot;&amp;gt;&amp;lt;credential name=&amp;quot;MDN&amp;quot;&amp;gt;248XXXXXXX&amp;lt;/credential&amp;gt;&amp;lt;/UserInfo&amp;gt;
 --&amp;gt;
&lt;/pre&gt;&lt;br /&gt;&lt;br /&gt;Ugly, huh?&lt;br /&gt;&lt;br /&gt;Anyway, there&apos;s some useful information, and the parser for this is at line 200 of livejournal/cgi-bin/ljemailgateway.pl.&lt;br /&gt;&lt;br /&gt;Now, I&apos;m a perl ninja and all, but I really don&apos;t want to hack this deep into the code having never laid my hands on it before, and offer up a patch that will one day break, or not work right, so I&apos;m hoping that if I supply a method of grabbing the full media file, someone else can make the fix and push it in? :)&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;Anyway, the key is in the actual body of the email, in the middle of the HTML. Yes, I know, parsing HTML to get this is fugly. Just wait, because it gets worse.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;
&amp;lt;img src=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,258&amp;amp;outquality=90&amp;amp;squareoutput=255,255,255&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&quot;/&amp;gt;
&lt;/pre&gt;&lt;br /&gt;&lt;br /&gt;Okay, so there&apos;s the line from the email that has the actual image string we want in it. Here&apos;s what you have to do:&lt;br /&gt;&lt;br /&gt;Search the email for an image tag with the string &quot;/mmps/RECIPIENT/&quot; in the src.&lt;br /&gt;&lt;br /&gt;Pull out the url:&lt;br /&gt;&lt;a href=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,258&amp;amp;outquality=90&amp;amp;squareoutput=255,255,255&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&quot;&gt;http://pictures.sprintpcs.com//mmps/REC&lt;wbr /&gt;IPIENT/001_01116de4bcdbcd9c_1/2.2?invite&lt;wbr /&gt;Token=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,2&lt;wbr /&gt;58&amp;amp;outquality=90&amp;amp;squareoutput=255,255@25&lt;wbr /&gt;5&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;In the real email, they&apos;re actually HTML entities too, so you have to use HTML::Entities::decode_entities() to make it work right. It&apos;s already loaded (and used in the current code) so no biggie.&lt;br /&gt;&lt;br /&gt;What you have to end up doing is removing all arguments to that URL, except for inviteToken=blalbalbalblab and ext=.jpg&lt;br /&gt;&lt;br /&gt;So it now looks like:&lt;br /&gt;&lt;a href=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;ext=.jpg&quot;&gt;http://pictures.sprintpcs.com//mmps/REC&lt;wbr /&gt;IPIENT/001_01116de4bcdbcd9c_1/2.2?invite&lt;wbr /&gt;Token=iETr4JPjm77BG8Bo7UHh&amp;amp;ext=.jpg&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;This has the upside of removing the stupid &quot;frame&quot; from around the picture too. ugh.&lt;br /&gt;&lt;br /&gt;You now hold the raw media file, which in this example, is from my girlfriend&apos;s 640x480 phone, a picture of hello kitty.&lt;br /&gt;&lt;br /&gt;The upside to this URL, is also, strangely enough, that unlike the tag in the XML, this image does not expire. You can fetch it at any time, even if the mailserver is lagging bad, and doesn&apos;t process the message for the default expiry of 7 days.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;I&apos;d be willing to pitch in what I can in terms of code to get this going, but from my description, it should be pretty self explanitory, and allow for much higher quality images to come from sprint phones.&lt;br /&gt;&lt;br /&gt;Thanks!</description>
  <comments>http://community.livejournal.com/lj_dev/711730.html</comments>
  <lj:mood>geeky</lj:mood>
</item>
<item>
  <guid   ermaLink='true'>http://community.livejournal.com/lj_dev/711461.html</guid>
  <pubDate>Thu, 09 Mar 2006 10:58:17 GMT</pubDate>
  <title>OpenId: wrongly escaped url?</title>
  <link>http://community.livejournal.com/lj_dev/711461.html</link>
  <description>Hey,&lt;br /&gt;&lt;br /&gt;Our users (&lt;a href=&quot;http://www.foodcandy.com&quot;&gt;http://www.foodcandy.com&lt;/a&gt;) have issues with Lj&apos;s OpenId implementation on Firefox running on Linux. Details after the cut.&lt;br /&gt;&lt;a name=&quot;cutid1&quot;&gt;&lt;/a&gt;&lt;br /&gt;We redirect to something like this: &lt;a href=&quot;http://www.livejournal.com:80/openid/server.bml?openid.identity=http%3a%2f%2fharryh.livejournal.com%2f&amp;openid.return_to=http%3a%2f%www.foodcandy.com%2fAccountLogin.aspx&amp;openid.trust_root=http%3a%2f%2fwww.foodcandy.com&amp;openid.mode=checkid_setup&amp;openid.assoc_handle=1141175386%3azLGZESEzvNsNz52O41kC%3a94aec3bf89&quot;&gt;http://www.livejournal.com:80/openid/se&lt;wbr /&gt;rver.bml?openid.identity=http%3a%2f%2fha&lt;wbr /&gt;rryh.livejournal.com%2f&amp;openid.return_to=http%3a%2f%www.foodcand&lt;wbr /&gt;y.com%2fAccountLogin.aspx&amp;openid.trust_root=http%3a%2f%2fwww.foodc&lt;wbr /&gt;andy.com&amp;openid.mode=checkid_setup&amp;openid.assoc_handle=1141175386%3azLGZESE&lt;wbr /&gt;zvNsNz52O41kC%3a94aec3bf89&lt;/a&gt; - that seems to land at &lt;a href=&quot;http://www.livejournal.com/openid/approve.bml?return_to=http://www.foodcandy.com/AccountLogin.aspx&amp;identity=http://harryh.livejournal.com/&amp;assoc_handle=1141175929:av40yQ946R3z4WrUd70P:42b4506fe8&amp;trust_root=http://www.foodcandy.com&quot;&gt;http://www.livejournal.com/openid/appro&lt;wbr /&gt;ve.bml?return_to=http://www.foodcandy.co&lt;wbr /&gt;m/AccountLogin.aspx&amp;identity=http://harryh.livejournal.com/&amp;assoc_handle=1141175929:av40yQ946R3z4WrU&lt;wbr /&gt;d70P:42b4506fe8&amp;trust_root=http://www.foodcandy.com&lt;/a&gt;. &lt;br /&gt;&lt;br /&gt;Notice the unescaped parameters (looks wrong to me).&lt;br /&gt;&lt;br /&gt;My users are saying this is a blank page on firefox+linux.&lt;br /&gt;&lt;br /&gt;Ideas? Comments? Bug?&lt;br /&gt;&lt;br /&gt;Much appreciated,&lt;br /&gt;dB.&lt;br /&gt;</description>
  <comments>http://community.livejournal.com/lj_dev/711461.html</comments>
</item>
<item>
  <guid isSermaLink='true'>http://community.livejournal.com/lj_dev/711286.html</guid>
  <pubDate>Tue, 07 Mar 2006 00:25:25 GMT</pubDate>
  <title>XSS exploits &amp; perm accounts</title>
  <link>http://community.livejournal.com/lj_dev/711286.html</link>
  <description>Another security bughunt round will begin soon (the code on both the live site and dev site needs to be updated), but before that begins I want to make sure everybody has their perm accounts.&lt;br /&gt;&lt;br /&gt;We notice that there are 9 people that haven&apos;t got theirs yet.  If you&apos;re one, email accounts@livejournal.com (using the email you would&apos;ve sent the XSS-LJ email with) with the username you want to have a perm account and we&apos;ll look up your ticket and award you.&lt;br /&gt;&lt;br /&gt;The SHA1s of the lowercased emails that still need perm accounts are:&lt;br /&gt;&lt;br /&gt;165ca37eabfd30d39c0b02063643fe2a73aa25d6&lt;br /&gt;335410032e8c0c44a1c30f8f848ad0ac8a7e03c5&lt;br /&gt;3f2c8af8ff061ccbe08494a62d714457d1a71c30&lt;br /&gt;59e9914025681bb2145661c781d048b458880595&lt;br /&gt;7457cb4526638c4304143688ed242a45847658d0&lt;br /&gt;b619c73a32aa92ae6909cf9ec5b6c0bcbd481ba7&lt;br /&gt;b87d5a97a2fce540e97edbc969d769f083b02f8d&lt;br /&gt;cb5ae7ce9c253fd803a682a2816adc1fc692883e&lt;br /&gt;d8c33159d760a5e5602728d9e52f7dbb9fa971e9</description>
  <comments>http://community.livejournal.com/lj_dev/711286.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/711020.html</guid>
  <pubDate>Mon, 27 Feb 2006 23:31:49 GMT</pubDate>
  <title>Duplicate feeds for communities</title>
  <link>http://community.livejournal.com/lj_dev/711020.html</link>
  <description>Hello.&lt;br /&gt;I&apos;m product manager for Yandex Blog Search, russian blog search engine.&lt;br /&gt;&lt;br /&gt;We have some difficulties with LJ.&lt;br /&gt;&lt;br /&gt;Main difficulty now is that any community, for example, &lt;a href=&quot;http://lj-dev.livejournal.com/&quot;&gt;http://lj-dev.livejournal.com/&lt;/a&gt; (and &lt;a href=&quot;http://lj-dev.livejournal.com/data/rss&quot;&gt;http://lj-dev.livejournal.com/data/rss&lt;/a&gt;&lt;wbr /&gt;) is not a redirect to right location (&lt;a href=&quot;http://community.livejournal.com/lj_dev/&quot;&gt;http://community.livejournal.com/lj_de&lt;wbr /&gt;v/&lt;/a&gt;), but a duplicate. It leads to some side effects in our blog search.&lt;br /&gt;&lt;br /&gt;Do you think it is bug? We reported it first day after URLs changed, but it was not fixed.&lt;br /&gt;&lt;br /&gt;Sorry if this is wrong place for such questions.</description>
  <comments>http://community.livejournal.com/lj_dev/711020.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/710896.html</guid>
  <pubDate>Thu, 16 Feb 2006 17:00:34 GMT</pubDate>
  <title>LJ Apache/mod_perl2 Port</title>
  <link>http://community.livejournal.com/lj_dev/710896.html</link>
  <description>Hello to everyone on ljdev!&lt;br /&gt;&lt;br /&gt;This is my first time post in ljdev although I&apos;ve been monitoring ljdev on and off for many months now.  I&apos;m primarily interested in having a version of LJ running on Apache/mod_perl2 - finally getting around making it happen.  Unfortunately I had to incorporate it as part of a school project to carve out the time.&lt;br /&gt;&lt;br /&gt;In a couple of weeks I hope to have semi-functioning LJ code that supports both Apache 1.x &amp; 2.x and associated mod_perl (since that&apos;s when the project is due) - especially interested in having it run with minimal work with vanilla Fedora Core 4.&lt;br /&gt;&lt;br /&gt;There are a couple of ljdev posts regarding LJ and Apache 2.0 so there seems to be some interest.  Will anyone be interested in my port?  I&apos;d like to contribute my work if anyone&apos;s willing to try it out.&lt;br /&gt;&lt;br /&gt;Advice and comments would be greatly appreciated!&lt;br /&gt;&lt;br /&gt;And finally I have some questions - some for the purposes of the port and others are for the project report (I have to get the school fluff out of the way!).  A big thanks to those who reply!&lt;br /&gt;&lt;br /&gt;&lt;ol&gt;&lt;li&gt;Why are you interested in a 2.x port?  My initial motivation was to run a small private, LJ site for small group of friends but I couldn&apos;t get it to work with Fedora-out-of-the-box.  My goal is to have LJ running with as little modification as possible to a Fedora system.&lt;/li&gt;&lt;br /&gt;&lt;li&gt;For those who plan to install LJ on their own servers, how many users are you looking to support?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;What kind of systems are you planning to use as LJ server?  OS? 6Desktop PC? Server machine?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;What are the primary reason(s) for using LJ?  What kind of journals (work? personal?)&lt;/li&gt;&lt;br /&gt;&lt;li&gt;Are you interested in a straight port to 2.x or one that supports both 1.x and 2.x?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;Why do you want backwards compatibility?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;What are you most worried about with installing/upgrading LJ?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;What part of the (LJ) installation process causes the most pain?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;What kind of configurations of LJ/Apache/mod_perl do you have?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;Additional comments/insights/suggestions?  Any questions you think I should have asked?&lt;/li&gt;&lt;br /&gt;&lt;/ol&gt;</description>
  <comments>http://community.livejournal.com/lj_dev/710896.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/710503.html</guid>
  <pubDate>Tue, 14 Feb 2006 18:09:27 GMT</pubDate>
  <title>CVS repository down?</title>
  <link>http://community.livejournal.com/lj_dev/710503.html</link>
  <description>Hi,&lt;br /&gt;&lt;br /&gt;I&apos;m new to livejournal, and would like to download the opensource for reference in my school project. However, I can&apos;t seem to be able to download anything through the cvs. Is the server currently down? If so, when will it be up again? Please advice, Thank you. :)&lt;br /&gt;&lt;br /&gt;Cheers.</description>
  <comments>http://community.livejournal.com/lj_dev/710503.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/710161.html</guid>
  <pubDate>Mon, 13 Feb 2006 19:53:25 GMT</pubDate>
  <title>XSS update</title>
  <link>http://community.livejournal.com/lj_dev/710161.html</link>
  <description>Fixed a bunch, still got a handful to go.&lt;br /&gt;&lt;br /&gt;We&apos;re keeping all the emaijs in our ticket tracking system, and keeping track of who needs a permanent account.  Ryan is going through the list this week (and some of last week) and emailing out perm account coupons/information.&lt;br /&gt;&lt;br /&gt;Will post more about round 3 when we&apos;re done fixing all current known issues.</description>
  <comments>http://community.livejournal.com/lj_dev/710161.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/709783.html</guid>
  <pubDate>Wed, 08 Feb 2006 05:02:41 GMT</pubDate>
  <title>Enhancing the RTE</title>
  <link>http://community.livejournal.com/lj_dev/709783.html</link>
  <description>So I&apos;ve been spending part of the day working on integrating &lt;a href=&quot;http://www.fckeditor.net/&quot;&gt;FCKeditor&lt;/a&gt; into LJ, since we all know the current rich text editor isn&apos;t great.  Issue I&apos;m running into is it always converts &amp;lt;, &amp;gt;, and &amp; to their html entities on submit.  So this presents a problem for people wanting to type something like &amp;lt;lj user=&apos;test&apos; /&amp;gt;.&lt;br /&gt;&lt;br /&gt;So two solutions I see:&lt;br /&gt;A) Stop the entity conversion&lt;br /&gt;B) Write a plugin that adds toolbar buttons for LJ specific tags&lt;br /&gt;&lt;br /&gt;Issue with A is that I can&apos;t figure out where the this conversion is happening.  I have disabled the FCKConfig.ProcessHTMLEntities option, but a comment in fckhtmlentities.js says, &quot;This entity is automatically handled by the XHTML parser&quot;.  Every place it seems like it would be doing this conversion, it isn&apos;t.  So frustrated with this option.&lt;br /&gt;&lt;br /&gt;Issue with B is I that can write a plugin to add a toolbar button with no problem, but don&apos;t think I can make it convert an lj tag when someone goes from normal to rich mode.  Also not sure how to visually represent things like an lj-cut in the editing interface.&lt;br /&gt;&lt;br /&gt;Another option is to always convert the entity back on form submission, client or server side, this however would mean that I couldn&apos;t type the entities in the RTE like I did above as an example tag.&lt;br /&gt;&lt;br /&gt;So two solutions, neither of which seem perfect.  Seems like the good solution is a combination of A and B, so a button to add these tags, and have them show up as a tag in the rich view while not being converted to entities on submit.  Been reading through the project&apos;s site on SourceForge and seems like others have this same issue with entities; though I guess the project hasn&apos;t decided    address it yet.  Costs $175 in a donation to get &quot;email support&quot;.  Anyone familiar with FCKeditor?&lt;br /&gt;&lt;br /&gt;Edit: Seems like I&apos;ve just been going crazy with this all day and it is a fairly easy solution.  On submit we do a bit of a onversion which should end up with the right stuff in the end.  Sorry for the friends page spam. :P</description>
  <commenvs>http://community.livejournal.com/lj_dev/709783.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/709562.html</guid>
  <pubDate>Tue, 07 Feb 2006 21:29:41 GMT</pubDate>
  <title>LJ crawler for reasearch purposes</title>
  <link>http://community.livejournal.com/lj_dev/709562.html</link>
  <description>Hello!  I&apos;m sure this has been asked many times, but I haven&apos;t found such a post looking back for a while.  Anyway: I&apos;m currently writing a crawler for LJ for a research project that I&apos;m working on, and I want to make sure I&apos;m following all the rules, and also if anyone has advice they could give me.  &lt;br /&gt;&lt;br /&gt;First of all:  the research is to determine group sentiment towards particular topics.  We will make a single crawl over LJ and then use the data to develop agregate results.  Details of individual users will not be mentioned in the report.  &lt;br /&gt;&lt;br /&gt;For this project we plan to first seed our crawler with usernames and community names found in google searches on a particular topic.  We will then crawl over community members and friends of users whose robots.txt files don&apos;t exclude crawlers.  From each user we are considering only pulling the RSS file, or possibly pulling articles from up to a year in the past.  &lt;br /&gt;&lt;br /&gt;I have a few questions, though:&lt;br /&gt;&lt;br /&gt;&lt;ul&gt;&lt;br /&gt;&lt;li&gt;What about pulling user comments?  Would that be ok?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;How do I know if a community allows robots or not, since they don&apos;t have a subdomain with a robots.txt file?&lt;/li&gt;&lt;br /&gtI&lt;li&gt;At what rate of requests/sec should I set my crawler to in order for it to be &quot;nice&quot;?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;Are there any previous simmilar works that anyone is aware of?&lt;/li&gt;&lt;br /&gt;&lt;li&gt;For users that exclude robots: would it be appropriate if I send them a message via their livejournal email address asking if they would like to be included in the research?&lt;/li&gt;&lt;br /&gt;&lt;/ul&gt;&lt;br /&gt;&lt;br /&gt;Again, this is strictly not for profit, aggregate data collection for research purposes only.  I would appreciate any comments anyone has.</description>
  <comments>http://community.livejournal.com/lj_dev/709562.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/709314.html</guid>
  <pubDate>Tue, 07 Feb 2006 19:06:39 GMT</pubDate>
  <title>An easier way to find CSS exploits</title>
  <link>http://community.livejournal.com/lj_dev/709314.html</link>
  <description>Another way to get permanent accounts, if nobody has beaten you to the exploit:&lt;br /&gt;&lt;br /&gt;&lt;a href=&quot;http://www.test.dev.livejournal.org/misc/csstest.bml&quot;&gt;http://www.test.dev.livejournal.org/mis&lt;wbr /&gt;c/csstest.bml&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;Find some CSS which does an alert box (or any JavaScript, but alerts are very in-your-face), then email me with at least subject &quot;XSS-LJ &lt;i&gt;whatever&lt;/i&gt;&quot;, the browser, and the CSS you put in the box.&lt;br /&gt;&lt;br /&gt;Happy Hacking.</description>
  <comments>http://community.livejournal.com/lj_dev/709314.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/708866.html</guid>
  <pubDate>Tue, 07 Feb 2006 00:06:07 GMT</pubDate>
  <title>XSS coou have to do:&lt;br /&gt;&lt;br /&gt;Search the email for an image tag with the string &quot;/mmps/RECIPIENT/&quot; in the src.&lt;br /&gt;&lt;br /&gt;Pull out the url:&lt;br /&gt;&lt;a href=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,258&amp;amp;outquality=90&amp;amp;squareoutput=255,255,255&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&quot;&gt;http://pictures.sprintpcs.com//mmps/REC&lt;wbr /&gt;IPIENT/001_01116de4bcdbcd9c_1/2.2?invite&lt;wbr /&gt;Token=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsig!&lt;br /&gt;&lt;br /&gt;&lt;b&gt;BTW&lt;/b&gt;, we&apos;re still tracking everybody&apos;s submissions.  If you haven&apos;t gotten your permanent account, don&apos;t worry ... we haven&apos;t forgotten about you.  Just backlogged.</description>
  <comments>http://community.livejournal.com/lj_dev/708866.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/708810.html</guid>
  <pubDate>Fri, 03 Feb 2006 06:55:07 GMT</pubDate>
  <title>legacy cookie support actually fixed now</title>
  <link>http://community.livejournal.com/lj_dev/708810.html</link>
  <description>The code in LJ::Session which supported legacy cookie support was broken due to a subtle bug in BML&apos;s cookie handling.  That&apos;s now fixed:&lt;br /&gt;&lt;br /&gt;&lt;a href=&quot;http://community.livejournal.com/changelog/2656195.html&quot;&gt;http://community.livejournal.com/change&lt;wbr /&gt;log/2656195.html&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;So all these issues will go away after the next code push:&lt;br /&gt;&lt;br /&gt;&lt;a href=&quot;http://community.livejournal.com/lj_dev/706840.html&quot;&gt;http://community.livejournal.com/lj&lt;wbr /&gt;_dev/706840.html&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;Sorry for not testing it last time... the code in LJ::Session was so simple it was &quot;obviously&quot; correct (and it was, afterall), but the BML bug messed it up.  (that we got back [undef], not [], when ljmastersession wasn&apos;t present....)</description>
  <comments>http://community.livejournal.com/lj_dev/708810.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/708425.html</guid>
  <pubDate>Wed, 01 Feb 2006 05:01:23 GMT</pubDate>
  <title>XSS challenge: update</title>
  <link>http://community.livejournal.com/lj_dev/708425.html</link>
  <description>Whoa, thanks everybody.&lt;br /&gt;&lt;br /&gt;Please, though, hold off on the XSS bug reports.  We got way more than we thought.  Embarassing.  I was hoping for 5 or 6, not ~30.&lt;br /&gt;&lt;br /&gt;We&apos;ve fixed most of them but still have a few hard ones remaining and most the incoming emails now are dups.&lt;br /&gt;&lt;br /&gt;Please wait for round two.  (tomorrow or tomorrow night I&apos;m guessing, after we update the test server&apos;s code...)&lt;br /&gt;&lt;br /&gt;Don&apos;t worry, we&apos;re making tickets for all of them, and we&apos;re keeping track of each ones who/what/when of them all.  We&apos;ll be doing perm accounts in a batch after we put up round two.</description>
  <comments>http://community.livejournal.com/lj_dev/708425.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/708C13.html</guid>
  <pubDate>Tue, 31 Jan 2006 06:29:46 GMT</pubDate>
  <title>the XSS security challenge</title>
  <link>http://community.livejournal.com/lj_dev/708313.html</link>
  <description>Anybody bored and want a permanent account?  Read on:&lt;br /&gt;&lt;br /&gt;We&apos;re going to be running an XSS (Cross site scripting / Javascript injection) bug hunt challenge soon here.  The biz people like the idea but need to squabble over rules and legal stuff.  &lt;b&gt;Unofficially&lt;/b&gt;, it&apos;ll involve giving out permanent accounts and money (or gift certificates).&lt;br /&gt;&lt;br /&gt;So while I can&apos;t promise you jack right now in terms of money, I can give out permanent accounts like candy, so I&apos;ll announce the first round of the game:&lt;br /&gt;&lt;br /&gt;&lt;b&gt;STEP 1:&lt;/b&gt;  Go to &lt;a href=&quot;http://www.test.dev.livejournal.org/&quot;&gt;http://www.test.dev.livejournal.org/&lt;wbr /&gt;&lt;/a&gt; .  Make an account.  Probably need to &lt;a href=&quot;http://www.test.dev.livejournal.org/admin/accounts/acctedit.bml&quot;&gt;change it to paid&lt;/a&gt; so you can make styles/etc.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;STEP 2:&lt;/b&gt;  Inject some JavaScript.  Use S1, S2, CSS, overrides, you name it.  It&apos;d probably help if you read the HTML and CSS cleaner code in cvs to look for bugs, but it&apos;s not required.  If you want, the code is at:&lt;br /&gt;&lt;br /&gt;cvs/livejournal/cgi-bin/cleanhtml.pl&lt;br /&gt;cvs/wcmtools/lib/HTMLCleaner.pm&lt;br /&gt;cvs/wcmtools/lib/CSS-Cleaner/lib/CSS/Cle&lt;wbr /&gt;aner.pm&lt;br /&gt;&lt;br /&gt;CVS viewers are at &lt;a href=&quot;http://cvs.danga.com/&quot;&gt;http://cvs.danga.com/&lt;/a&gt; and &lt;a href=&quot;http://cvs.livejournal.org/&quot;&gt;http://cvs.livejournal.org/&lt;/a&gt; .&lt;br /&gt;&lt;br /&gt;&lt;b&gt;STEP 3:&lt;/b&gt;  Email me (brad@danga.com) with subject containing at least &quot;&lt;b&gt;XSS-LJ&lt;/b&gt;&quot;, and a URL to a &lt;b&gt;&lt;i&gt;minimal test case&lt;/i&gt;&lt;/b&gt; illustrating your hole.  I need to know how you did it, source code, maybe your test account&apos;s password, whatever it takes.  The more clear it is, the more likely you win and I don&apos;t accept somebody else&apos;s later but more clear bug report first.  After you find a hole, go create a new account for your next hole.&lt;br /&gt;&lt;br /&gt;Brad&apos;s unofficial rules:  I am judge, jury, and sole candy giver, at least until there are official rules.  If I give you a permanent account, that doesn&apos;t mean you&apos;re not eligible for money/gift certificates later.  We&apos;ll retroactively give that out for the best/hardest-to-fix/most-clever holes after the fact.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;NOTE:&lt;/b&gt;  The code running on the above URLs isn&apos;t live on the site yet.  We don&apos;t care about holes at www.livejournal.com, because they&apos;re likely already fixed in the test code.  The test code will go live on the site soon-ish.  So reproduce (or produce) your bug reports on the test machine.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;NOTE 2:&lt;/b&gt;  The test machine above is a small virtual machine.  I might not have given it enough memory.  If it sucks, I&apos;ll increase it.  Bear with me.</description>
  <comments>http://community.livejournal.com/lj_dev/708313.html</comments>
</item>
<item>
  <guid isPermGLink='true'>http://community.livejournal.com/lj_dev/708069.html</guid>
  <pubDate>Fri, 27 Jan 2006 00:38:18 GMT</pubDate>
  <title>Discussing The Security Changes</title>
  <link>http://community.livejournal.com/lj_dev/708069.html</link>
  <description>As we announced last week in &lt;span class=&apos;ljuser&apos; style=&apos;white-space: nowrap;&apos;&gt;&lt;a href=&apos;http://news.livejournal.com/profile&apos;&gt;&lt;img src=&apos;http://stat.livejournal.com/img/newsinfo.gif&apos; alt=&apos;[info]&apos; width=&apos;16&apos; height=&apos;16&apos; style=&apos;vertical-align: bottom; border: 0;&apos; /&gt;&lt;/a&gt;&lt;a href=&apos;http://news.livejournal.com/&apos;&gt;&lt;b&gt;news&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;, we have changed the canonical URL of most journal, community, and syndicated content.  We have also now changed our cookie handling &lt;a href=&quot;http://community.livejournal.com/lj_dev/706058.html&quot;&gt;as Brad previously described&lt;/a&gt;.  In the end this means that it is much more difficult to steal a useful cookie.  Our goal wit   r new cookie scheme is to limit the damage that can occur when your cookies do get stolen, which we&apos;re just going to assume is inevitable, as vulnerabilities have been found in all major browsers and we&apos;re quite sure new vulnerabilities will continue to be found.&lt;br /&gt;&lt;br /&gt;Shortly before our news post last week, we became aware that it was possible to use the ‚Äú-moz-binding‚Äù CSS attribute within Mozhlla and Mozilla Firefox to execute arbitrary offsite JavaScript.  As this attribute is designed to allow attaching an XBL transform and JavaScript to any node within the DOM, it is quite easy to use in a malicious fashion.  A &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=324253&quot;&gt;bug&lt;/a&gt; has also been filed in Mozilla&apos;s BugZilla tracker to try and address this issue.  Over a year ago, &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=178993&quot;&gt;we sponsored and developed&lt;/a&gt; a patch for Mozilla to support HTTPOnly cookies which emerged in Internet Explorer 6 and would have prevented this attack, though this patch was never included in Mozilla.&lt;br /&gt;&lt;br /&gt;We immediately altered our cleaner to strip this attribute from entries and comments, though also realized that wasn&apos;t even half the battle.  As we allow custom CSS in many of our styles, as well as the ability to link to an external stylesheet in a variety of fashions, it was quite possible to take advantage of this exploit and hijack the session cookie of any user who views your journal.  As we, along with many other sites, used one cookie to authenticate a user, this cookie was quite powerful if stolen.  If the user had not chosen to bind their cookie to their IP address, a malicious user could steal it, login as that user, deface the account and spam with it, as well as modify that user&apos;s style to include the exploit thus causing this problem to spread much like a virus.&lt;br /&gt;&lt;br /&gt;Borrowing the idea from another development team within Six Apart, we decided we needed to break our cookies into three categories.  One cookie would be our master cookie, this cookie would only be accessible on www.livejournal.com where we will not display untrusted content.  A second cookie will be accessible on all subdomains of livejournal.com, though it only will say if you are logged in or not; it is solely for optimization.  We then will issue one cookie for each journal you visit.  This cookie will be only accessible on username.livejournal.com or community.livejournal.com/username as it is limited to a single journal.  This cookie will only grant you the permission to read protected entries and post in the particular journal.  This means that if the journal owner steals your cookie, they will be able to do nothing more than view their journal as if they are you.  In the end you will have n+2 cookies, with n being the number of journals you visit.&lt;br /&gt;&lt;br /&gt;Due to the fact that we cannot clean every external CSS stylesheet linked to every time we generate a journal page, this change is required.  While it does not fully protect us from some new cross site scripting vulnerability that can be exploited via entries or comments, they are much easier to block, patch, and recover from quickly. With Mozilla deciding to allow the execution of arbitrary JavaScript via CSS, there is no other viable solution than the one we have undertaken.&lt;br /&gt;&lt;br /&gt;We&apos;ve already taken a variety of steps to further protect your account such as we&apos;ve &lt;a href=&quot;http://www.livejournal.com/manage/logins.bml&quot;&gt;implemented a page where you can see all of your login session&lt;/a&gt;, now require your password to change your email address, and now send secure password reset emails.  We also are planning future improvements, especially related to external CSS stylesheets, and hope everyone realizes the amount of attention we place on the security of every account.  We&apos;re more than happy to answer any questions you have in regards to the changes we&apos;ve made over the past week, though also hope it is understood that we are limited in what information we can share when actively dealing with a situation such as this.</description>
  <comments>http://community.livejournal.com/lj_dev/708069.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/707830.html</guid>
  <pubDate>Thu, 26 Jan 2006 17:43:10 GMT</pubDate>
  <title>Apache2 + LJ fun</title>
  <link>http://community.livejournal.com/lj_dev/707830.html</link>
  <description>So, I decided to ignore the warnings about the LiveJournal code not working on Apache2 and try it anyway (using Apache2::compat for now). Oddly enough, some of the problems I&apos;ve run into so far are mod_perl ones (I&apos;m using 2.0.2) rather than LiveJournal ones...&lt;br /&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;PerlSetEnv doesn&apos;t seem to have any effect in a VirtualHost, even though the docs say it should work (this is where &lt;a href=&quot;http://community.livejournal.com/lj_dev/690668.html&quot;&gt;someone else&apos;s attempts failed&lt;/a&gt;). Moving it to global scope made it work. This would probably also apply if porting to mod_perl 2.0 properly.&lt;/li&gt;&lt;li&gt;Apache::LiveJournal::Interface::S2 - &apos;Bareword &quot;OK&quot; not allowed while &quot;strict subs&quot; in use&apos;, solved by changing the include to &apos;use Apache::Constants qw(NOT_FOUND OK);&apos;. Not sure what causes this (but the change might still be necessary if porting properly)...&lt;/li&gt;&lt;li&gt;Apache2::compat &lt;a href=&quot;http://perl.apache.org/docs/2.0/user/porting/compat.html#C_Apache__Constants_&quot;&gt;&quot;doesn&apos;t provide a complete back compatibility layer&quot;&lt;/a&gt; for Apache::Constants. BAD_REQUEST is missing (it&apos;s Apache2::Const::HTTP_BAD_REQUEST in mod_perl 2). This breaks FotoBilder.pm&lt;/li&gt;&lt;li&gt;Apache::Log and Apache::URI aren&apos;t provided by Apache2::compat, though their functionality is&lt;/li&gt;&lt;li&gt;Apache::compat doesn&apos;t work outside of Apache. update-db.pl indirectly depends on Apache::Constants. If anyone actually ports LJ, this should work properly.&lt;/li&gt;&lt;br /&gt;&lt;br /&gt;It still doesn&apos;t work (BML docs not handled, DocumentRoot not set, etc - IOW, the httpd.conf injection doesn&apos;t seem to work), though at least Apache starts now. I wonder how much work porting it to mod_perl 2 (rather than using Apache2::compat) would be?&lt;/ul&gt;</description>
  <comments>http://community.livejournal.com/lj_dev/707830.html</comments>
</item>
</channel>
</rss>
