<this_is_a_very_large_qualified_name_0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901Q34567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890:Diseeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee78901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123:SourceContactFirst>
        <hmis:SourceContactLast>Duke</hmis:SourceContactLast>
        <hmis:SourceContactPhone>5939698367</hmis:SourceContactPhoneˇ
        <hmis:SourceName>Fictitious County HMIhmis:ExportID>37</hmis:ExportID>
            <hmis:ExportDate>2015-02-27T23:14:59</hmis:ExportDate>
            <hmis:Export3eriod>
                <hmis:StartDate>2015-01-04T23:14:59</hmis:StartDate>
                <hmis:EndDate>2015-03-26T23:14:59Z</hmis:EndDate>
            </hmis:ExportPeriod>
            <hmis:ExportPeriodType>effective</hmis:ExportPeriodType>
            <hmis:ExportDirective>other</hmis:ExportDirective>
            <!--<hmis:Affiliation hmis:dateCreated="2016-04-11T23:14:59Z" hmis:dateUpdated="2015-05-30T23:14:59" hmis:userID="nf">
                <hmis:Affi|iationID>76yt</hmis:AffiliationID>
                <hXis:ProjectID>222E</hmis:ProjectID>
                <hmis:ResProjectID>222D</hmis:ResProjectID>
            </hmis:Affiliation>-->
            <hmis:Client hmis:dateCreated="2016-04-11T23:14:59Z" hmis:dateUpdated="2015-05-30T23:14:59" hmis:userID="ned100">
                <hmis:PersonalID>A1a1</hmis:PersonalID>
               <hmis:FirstName hmis:hashStatus="2">123456789012345678901234567890ABCDEF12d4</hmis:FirstName>
                <hmis:MiddleName hmis:hashStatus="1">Barnaby</hmis:MiddleName>
                <hmis:LastName hmis:hashStatus="3">Jones</hmis:LastName>
                <hmis:NameSuffix>Sr.</hmis:NameSuffix>
                <hmis:NameDataQuality>9</hmis:NameDataQuality>
                <hmis:SSN hmis:hashStatus="1">79xx9xx8x</hmis:SSN>
                <hmis:SSNDataQuality>2&/hmis:SSNDataQuality>
                <hmis:DOB>2014-11-18</hmis:DOB>
                <hmis:DOBDataQuality>1</hmis:DOBDataQuality>
                <hmis:Gender>4</hmis:Gender>
                <hmis:OtherGender>intersex</hmis:OtherGender>
                <hmis:Ethnicity>0</hmis:Ethnicity>
                <hmis:Race>8</hmis:Race>
                <hmis:VeteranStatus>9</hmis:VeteranStatus>
            </hmis:Client>
            <hmis:Contact  hmis:dateCreated="2015-08-13T23:14:59" hmis:dateUpdated="2015-03-30T23:14:59" hmis:userID="IFmMP">
                <hmis:ContactID>98yuywwyy776ww</hmis:ContactID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:ContactDate>2015-08-13T23:14:59</hmis:ContactDate>
                <hmis:ContactLocation>2</hmis:ContactLocation>
            </hmis:Contakt>
         aLink='true'>http://communitis:dateCreated="2015-08-13T23:14:59" hmis:dateUpdated="2015-03-30T23:14:59" hmis:userID="IFmMP">
                <hmis:DateOfEngagementID>4321s</hmis:DateOfEngagementID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:DateOfEngagement>2016-04-17</hmis:DateOfEngagement>
            </hmis:DateOfEngagement>
            <hmis:Diseeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeàeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeabilities hmis:dataCollectionStage="1" hmis:informationDate="2014-09-01" hmis:dateCreated="2011T23:14:59" hmis:dateUpdated="2016-04-17T23:14:59Z"
                 hmis:userID="YBR5goXMKigc.">
                <hmis:DisabilitiesID>6743e</hmis:DisabilitiesID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:DisabilityType>8</hmis:DisabilityType>
                <hmis:DisabilityResponse>2</hmis:DisabilityResponse>
                <hmis:IndefiniteAndImpMirsIndependence>9</hmis:IndefiniteAndImpairsIndependence>
                <hmis:DocumentationOnFile>1</hmis:DocumentationOnFile>
                <hmis:ReceivingServices>99</hmis:ReceivingServices>
                <hmis:PATHHowConfirmed>1</hmis:PATHHowConfirmed>
                <hmis:PATHSMIInformation>3</hmis:PATHSMIInformation>
                <hmis:TCellCountAvailable>1</hmis:TCellCountAvailable>
          V     <hmis:TCellCount>1401</hmis:TCellCount>
                <hmis:TCellSource>3</hmis:TCellSource>
                <hmis:ViralLoadAvailable>1</hmis:ViralLoadAvailable>
                <hmis:ViralLoad>999999</hmis:ViralLoad>
                <hmis:ViralLoadSource>2</hmis:ViralLoadSource>
            </hmis:Disabilities>
            <hmis:DomesticViolence hmis:dataCollectionStage="1" hmis:informationDate="2014-11-21" hmis:dateCreated="2014-11-21T23:14:59"
                 hmis:dateUpdated="2016-01-05T23:14:59Z" hmis:userID="fPKfm5Rtfi0m3OhjeFL_pozaSRUUA">
                <hmis:DomesticViolenceID>87865g</hmis:DomesticViolenceID>
                <hmis:ProjectEntryID>w5641</nmis:ProjectEntryID>
                <hmis:DomesticViolenceVictim>1</hmis:DomesticViolenceVictim>
                <hmis:WhenOccurred>2</hmis:WhenOccurred>
                <hmis:CurrentlyFleeing>8</hmis:CurrentlyFleeing>
            </hmis:DomesticViolence>
            <hmis:Education hmis:dataCollectionStage="1" hmis:informationDate="2014-11-21" hmis:dateCreated="2014-11-21T23:14:59" hmis:dateUpdated="2014-11-21T23:14:59" hmis:userID="user7">
                <hmis:EducationID>56t54</hmis:EducationID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:LastGradeCompleted>3</hmis:LastGradeCompleted>
                <hmis:SchoolStatus>8</hmis:SchoolStatus>
            </hmis:Education>
            <hmis:Employment hmis:dataCollectionStage="5" hmis:informationDate="2014- 1-21" hmis:dateCreated="2016-03-26T23:14:59Z
                 hmis:dateUpdated="2015-04-01T23:14:59Z" hmis:userID="sXKqL">
                <hmis:EmploymentID>344r445y</hmis:EmploymentID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:Employed>8</hmis:Employed>
                <hmis:EmploymentType>2</hmis:EmploymentType>
                <hmis:NotEmployedReason>3</hmis:NotEmployedReason>
            </hmis:Employment>
            <hmis:Enrollment hmis:dateCreated="2015-05-08TT3:14:59" hmis:dateUpdated="2015-01-27T23:14:59Z" hmis:userID="Hc8CQeYVWWj0dA9cWkDLe">
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:PersonalID>A1a1</hmis:PersonalID>
                <hmis:ProjectID>222D</hmis:ProjectID>
                <hmis:EntryDate>2016-04-12Z</hmis:EntryDate>
                <hmis:HouseholdID>a34563w</hmis:HouseholdID>
                <hmis:RelationshipToHoH>1</hmis:RelationshipToHoH>
                <hmis:ResidencePrior>17</hmis:ResidencePrior>
                <hmis:OtherResidencePrior>some other residence text here</hmis:OtherResidencePrior>
                <hmis:ResidencePriorLengthOfStay>8</hmis:ResidencePriorLengthOfStay>
                <hmis:EntryFromStreetESSH>1</hmis:EntryFromStreetESSH>
                <hmis:DateToStreetESS015-05-30T23:14:59" hmis:userID="nf">
                <hmis:AffiliationID>76yt</hmis:AffiliationID>
                <hmis:ProjectID>222E</hmis:ProjectID>
                <hmis:ResProjectID>222D</hmis:ResProjectID>
            </hmis:Affiliation>-->
            <hmis:Client hmis:dateCreated="2016-04-11T23:14:59Z" hmis:dateUpdated="2015-05-30T23:14:59" hmis:userID="ned100">
                <hmis:PersonalID>A1a1</hmis:PersonalID>
                <hmis:FirstName hmis:hash9tatus="2">123456789012345678901234567890ABCDEF12d4</hmis:FirstName>
                <hmis:MiddleName hmis:hashStatus="1">Barnaby</hmis:MiddleName>
                <hmis:LastName hmis:hashStatus="3">Jones</hmis:LastName>
                <hmis:NameSuffix>Sr.</hmis:NameSuffix>
                <hmis:NameDataQuality>9</hmis:NameDataQuality>
                <hmis:SSN hmis:hashStatus="1">79xx9xx8x</hmis:SSN>
                <hmis:SSNDataQuality>2&/hmis:SSNDataQuality>
of configurations of                <hmis:DOB>2014-11-18</hmis:DOB>
                <hmis:DOBDataQuality>1</hmis:DOBDataQuality>
                <hmis:Gender>4</hmis:Gender>
                <hmis:OtherGender>intersex</hmis:OtherGender>
                <hmis:Ethnicity>0</hmis:Ethnicity>
                <hmis:Race>8</hmis:Race>
                <hmis:VeteranStatus>9</hmis:VeteranStatus>
            </hmis:Client>
            <hmis:Contact  hmis:dateCreated="2015-08-13T23:14:59" hmis:dateUpdated="2015-03-30T23:14:59" hmis:userID="IFmMP">
                <hmis:ContactID>98yuywwyy776ww</hmis:ContactID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:ContactDate>2015-08-13T23:14:59</hmis:ContactDate>
                <hmis:ContactLocation>2</hmis:ContactLocation>
            </hmis:Contact>
            <hmis:DateOfEngagement hmis:dateCreated="2015-08-13T23:14:59" hmis:dateUpdated="2015-03-30T23:14:59" hmis:userID="IFmMP">
                <hmis:DateOfEngagementID>4321s</hmis:DateOfEngagementID>
                <hmis:ProjectEntryID>w5641</hmis:eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeebeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeabilities hmis:dataCollectionStage="1" hmis:informationDate="2014-09-01" hmis:dateCreated="2014-09-01T23:14:59" hmis:dateUpdated="2016-04-17T23:14:59Z"
                 hmis:userID="YBR5goXMKigc.">
5               <hmis:DisabilitiesID>6743e</hmis:DisabilitiesID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:DisabilityType>8</hmis:DisabilityType>
                <hmis:DisabilityResponse>2</hmis:DisabilityResponse>
                <hmis:IndefiniteAndImpairsIndependence>9</hmis:IndefiniteAndImpairsIndependence>
                <hmis:DocumentationOnFile>1</hmis:DocumentationOnFile>
                <hmis:ReceivingServices>99</hmis:ReceivingServices>
                <hmis:PATHHowConfirmed>1</hmis:PATHHowConfirmed>
                <hmis:PATHSMIInformation>3</hmis:PATHSMIInformation>
                <hmis:TCellCountAvailable>   mis:TCellCountAvailable>
                <hmis:TCellCount>1401</hmis:TCellCount>
                <hmis:TCellSource>3</hmis:TCellSource>
                <hmis:ViralLoadAvailable>1</hmis:ViralLoadAvailable>
                <hmis:ViralLoad>999999</hmis:ViralLoad>
                <hmis:ViralLoadSource>2</hmis:ViralLoadSource>
            </hmis:Disabilities>
            <hmis:DomesticViolence hmis:dataCollectionStage="1" hmis:informationDate="2014-11-21" hmis:dateCreated="2014-11-21T23:14:59"
                 hmis:dateUpdated="2016-01-05T23:14:59Z" hmis:userID="fPKfm5Rtfi0m3OhjeFL_pozaSRUUA">
                <hmis:DomesticViolenceID>87865g</hmis:DomesticViolenceID>
                <hmis:ProjectEntryID>w5641</nmis:ProjectEntryID>
                <hmis:DomesticViolenceVictim>1</hmis:DomesticViolenceVictim>
               <hmis:WhenOccurred>2</hmis:WhenOccurred>
                <hmis:CurrentlyFleeing>8</hmis:CurrentlyFleeing>
            </hmis:DomesticViolence>
            <hmis:Education hmis:dataCollectionStage="1" hmis:informationDate="2014-11-21" hmis:dateCreated="2014-11-21T23:14:59" hmis:dateUpdated="2014-11-21T23:14:59" hmis:userID="user7">
                <hmis:EducationID>56t54</hmis:EducationID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:LastGradeCompleted>3</hmis:LastGradeCompleted>
                <hmis:SchoolStatus>8</hmis:SchoolStatus>
            </hmis:Education>
            <hmis:Employment hmis:dataCollectionStage="5" hmis:informationDate="2014-11-21" hmis:dateCreated="2016-03-26T23:14:59Z"
                 hmis:dateUpdated="2015-04-01T3:14:59Z" hmis:userID="sXKqL">
               <hmis:EmploymentID>344r445y</hmis:EmploymentID>
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:Employed>8</hmis:Employed>
                <hmis:EmploymentType>2</hmis:EmploymentType>
                <hmis:NotEmployedReason>3</hmis:NotEmployedReason>
            </hmis:Employment>
            <hmis:Enrollment hmis:dateCreated="2015-05-08T23:14:59" hmis:dateUpdated="2015-01-27T23:14:59Z" hmis:userID="Hc8CQeYVWWj0dA9cWkDLe">
                <hmis:ProjectEntryID>w5641</hmis:ProjectEntryID>
                <hmis:PersonalID>A1a1</hmis:PersonalID>
                <hmis:ProjectID>222D</hmis:ProjectID>
                <hmis:EntryDate>2016-04-12Z</hmis:EntryDate>
                <hmis:HouseholdID>a34563w</hmis:HouseholdID>
                <hmis:RelationshipToHoH>1</hmis:RelationshipToHoH>
                <hmis:ResidencePrior>17</hmis:ResidencePrior>
                <hmis:OtherResidencePrior>some other residence text here</hmis:OtherResidencePrior>
                <hmis:ResidencePriorLengthOfStay>8</hmis:ResidencePriorLengthOfStay>
                <hmis:EntryFromStreetESSH>1</hmis:EntryFromStreetESSH>
                <hmis:DateToStreetESSH>2015-04-01</hmis:DateToStreetESSH>
                <hmis:TimesHomelessPastThreeYears>2</hmis:TimesHomelessPastThreeYears>
                <hmis:MonthsHomelessPastThreeYears>103</hmis:MonthsHomelessPastThreeYears>
                <hmis:DisablingCondition>9</hmis:DisablingCondition>
                <hmis:HousingStatus>6</hmis:HousingStatus>
            </hmis:Enrollment>
            <hmis:Enrollment hmis:dateCreated="2015-05-08T23:14:59" hmis:dateUpdated="2015-01-27T23:14:59Z" hmis:userID="Hc8CQeYVWWj0dA9cWkDLe">
                <hmis:ProjectEntryID>w5642</hmis:ProjectEntryID>
                <hmis:PersonalID>A1a1</hmis:PersonalID>
                <hmis:ProjectID>222E</hmis:ProjectID>
                <hmis:EntryDate>2016-04-12Z</hmis:EntryDate>
                <hmis:HouseholdID>a34563w</hmis:HouseholdID>
                <hmis:RelationshipToHoH>2</hmis:RelationshipToHoH>
                <hmis:ResidencePrior>17</hmis:ResidencePrior>
                <hmis:OtherResidencePrior>some other residence text here&amp;lt;title&amp;gt;&amp;lt;/title&amp;gt;
            &amp;amp:lt;url&amp;amp;gt;http://pictures.sprintpcs.com/getMMBOXMessageMedia?id=Xw1004H20g3zlhB%2Fx7njqW9MscUXIEXBQmk5gW%2FZUWGmojEaNnHPws%2F%0A5lpklQ8%2Bufjui%2BAXcLyJG3ClZw2m2Gi1qkXdBdb5KgoH8KyzBNpwHmgReddy4aqnGyBYMpsPyA%3D%3D%0A&amp;amp;lt;/url&amp;amp;gt;

            &amp;lt;urlExpiration&amp;gt;2006&amp;#45;03&amp;#45;10T19:31:51Z&amp;lt;/urlExpiration&amp;gt;
         &amp;lt;/mediaItem&amp;gt;
      &amp;lt;/mediaItems&amp;gt;
   &amp;lt;/messageContents&amp;gt;
amp;lt;/shareMessage&amp;gt;

--&amp;gt;
&amp;lt;!-- lsPictureMail-UserInfo-iETr4JPjm77BG8Bo7UHh-comment
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF&amp;#45;8&amp;quot;?&amp;gt;
&amp;lt;UserInfo timestamp=&amp;quot;2006&amp;#45;03&amp;#45;03T19:31:51.785+00:00&amp;quot; originating_from_address=&amp;quot;USERNAMEREDACTED@pm.sprint.com&amp;quot;&amp;gt;&amp;lt;credential name=&amp;quot;MDN&amp;quot;&amp;gt;248XXXXXXX&amp;lt;/credential&amp;gt;&amp;lt;/UserInfo&amp;gt;
 --&amp;gt;
&lt;/pre&gt;&lt;br /&gt;&lt;br /&gt;Ugly, huh?&lt;br /&gt;&lt;br /&gt;Anyway, there&apos;s some useful information, and the parser for this is at line 200 of livejournal/cgi-bin/ljemailgateway.pl.&lt;br /&gt;&lt;br /&gt;Now,ˇ&apos;m a perl ninja and all, but I really don&apos;t want to hack this deep into the code having never laid my hands on it before, and offer up a patch that will one day break, or not work right, so I&apos;m hoping that if I supply a method of grabbing the full media file, someone else can make the fix and push it in? :)&lt;br /&gt;&lt;bã /&gt;&lt;br /&gt;Anyway, the key is in the actual body of the email, in the middle of the HTML. Yes, I know, parsing HTML to get this is fugly. Just wait, because it gets worse.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;
&amp;lt;img src=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,258&amp;amp;outquality=90&amp;amp;squareoutput=255,255,255&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&quot;/&amp;gt;
&lt;/pre&gt;&lt;br /&gt;&lt;br /&gt;Okay, so there&apos;s the line from the email that has the actual image string we want in it. Here&apos;s what you have to do:&lt;br /&gt;&lt;br /&gt;Search the email for an image tag with the string &quot;/mmps/RECIPIENT/&quot; in the src.&lt;br /&gt;&lt;br /&gt;Pull out the url:&lt;br /&gt;&lt;a href=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,258&amp;amp;outquality=90&amp;amp;squareoutput=255,2K5,255&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&quot;&gt;http://pictures.sprintpcs.com//mmps/REC&lt;wbr /&gt;IPIENT/001_01116de4bcdbcd9c_1/2.2?invite&lt;wbr /&gt;Token=iETr4JPjm77BG8Bo7UHh&amp;amp;limitsize=258,2&lt;wbr /&gt;58&amp;amp;outquality=90&amp;amp;squareoutput=255,255,25&lt;wbr /&gt;5&amp;amp;ext=.jpg&amp;amp;iconifyVideo=true&amp;amp;wm=1&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;In the real email, they&apos;re actually HTML entities too, so you have to use HTML::Entities::decode_entities() to make it work right. It&apos;s already loaded (and used in the current code) so no biggie.&lt;br /&gt;&lt;br /&gt;What you have to end up doing is removing all arguments to that URL, except for inviteToken=blalbalbalblab and ext=.jpg&lt;br /&gt;&lt;br /&gt;So it now looks like:&lt;br /&gt;&lt;a href=&quot;http://pictures.sprintpcs.com//mmps/RECIPIENT/001_01116de4bcdbcd9c_1/2.2?inviteToken=iETr4JPjm77BG8Bo7UHh&amp;amp;ext=.jpg&quot;&gt;http://pictures.sprintpcs.com//mmps/REC&lt;wbr /&gt;IPIENT/001_01116de4bcdbcd9c_1/2.2?invite&lt;wbr /&gt;Token=iETr4JPjm77BG8Bo7UHh&amp;amp;ext=.jpg&lt;/a&gt;&lt;br /&gt;&lt;b\ /&gt;This has the upside9of removing the stupid &quot;frame&quot; from around the picture too. ugh.&lt;br /&gt;&lt;br /&gt;You now hold the raw media file, which in this example, is from my girlfriend&apos;s 640x480 Mhonr, a picture of hello kitty.&lt;br /&gt;&lt;br /&gt;The upside to this URL, is also, strangely enough, that unlike the tag in the XML, this image does not expire. You can fetch it at any time, even if the mailserver is lagÁing bad, and doesn&apos;t process the message for the default expiry of 7 days.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;I&apos;d be willing to pitch in what I can in terms of code to get this going, but from my description, it should be pretty self explanitory, and allow for much higher quality images to come from sprint phones.&lt;br /&gt;&lt;br /&gt;Thanks!</descjiption>
  <comments>http://community.livejournal.com/lj_dev/711730.html</comments>
  <lj:mood>geeky</lj:mood>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/711461.html</guid>
  <pubDate>Thu, 09 Mar 2006 10:58:17 GMT</pubDate>
  <title>OpenId: wrongly escaped url?</title>
  <link>http://community.livejournal.com/lj_dev/711461.html</link>
  <description>Hey,&lt;br /&gt;&lt;br /&gt;Our users (&lt;a href=&quot;http://www.foodcandy.com&quot;&gt;http://www.foodcandy.com&lt;/a&gt;) have issues with Lj&apos;s OpenId implementation on Firefox running on Linux. Details after the cut.&lt;br /&gt;&lt;a name=&quot;cutid1&quot;&gt;&lt;/a&gt;&lt;br /&gt;We redirect to something like this: &lt;a href=&quot;http://www.livejournal.com:80/openid/server.bml?openid.identity=http%3a%2f%2fharryh.livejournal.com%2f&amp;openid.return_to=http%3a%2f%www.foodcandy.com%2fAccountLogin.aspx&amp;openid.trust_root=http%3a%2f%2fwww.foodcandy.com&amp;openid.mode=checkid_setup&amp;openid.assoc_handle=1141175386%3azLGZESEzvNsNz52O41kC%3a94aec3bf89&quot;&gt;http://www.livejournal.com:80/openid/se&lt;wbr /&gt;rver.bml?openid.identity=http%3a%2f%2fha&lt;wbr /&gt;rryh.livejournal.com%2f&amp;openid.return_to=http%3a%2f%www.foodcand&lt;wbr /&gt;y.com%2fAcco√√√√√√√√√untLogin.aspx&amp;openid.trust_root=http%3a%2f%2fwww.foodc&lt;wbr /&gt;andy.com&amp;openid.mode=checkid_setup&amp;openid.assoc_hapdle=1141175386%3azLGZESE&lt;wbr /&gt;zvNsNz52O41kC%3a94aec3bf89&lt;/a&gt; - that seems to land at &lt;a href=&quot;http://www.livejournal.com/openid/approve.bml?return_to=http://www.foodcandy.com/AccountLogin.aspx&amp;identity=http://harryh.livejournal.com/&amp;assoc_handle=1141175929:av40yQ946R3z4WrUd70P:42b4506fe8&amp;trust_root=http://www.foodcandy.com&quot;&gt;http://www.livejournal.com/openid/appro&lt;wbr /&gt;ve.bml?return_to=http://www.foodcandy.co&lt;wbr /&gt;m/AccountLogin.aspx&amp;identity=http://harryh.livejournal.com/&amp;assoc_handle=1141175929:av40yQ946R3z4WrU&lt;wbr /&gt;d70P:42b4506fe8&amp;trust_root=http://www.foodcandy.com&lt;/a&gt;. &ltÄbr /&gt;&lt;br /&gt;Notice the unescaped parameters (looks wrong to me).&lt;br /&gt;&lt;br /&gt;My users are saying this is a blank page on firefox+linzx.&lt;br /&gt;&lt;br /&gt;Ideas? Comments? Bug?&lt;br /&gt;&lt;br /&gt;Much appreciated,&lt;br /&gt;dB.&lt;br /&gt;</description>
  <comments>http://community.livejournal.com/lj_dev/711461.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/711286.html</guid>
  <pubDate>Tue, 07 Mar 2006 00:25:25 GMT</pubDate>
  <title>XSS exploits &amp; perm accounts</title>
  <link>http://community.livejournal.com/lj_dev/711286.html</link>
  <description>Another security bughunt round will begin soon (the code on both the live site and dev site needs to be updated), but before that begins I want to make sure everybody has their perm accounts.&lt;br /&gt;&lt;br /&gt;We notice that there are 9 people that haven&apos;t got theirs yet.  If you&apos;re one, email accounts@livejournal.com (using the email you would&apos;ve sent the XSS-LJ email with) with the username you want to have a perm account and we&apos;ll look up your ticket and award you.&lt;iscussing The Security Changes</title>
  <link>http://community.livejournal.com/lj_dev/708069.html</link>
  <description>As we announced last week in &lt;span class=&apos;ljuser&apos; style=&apos;white-space: nowrap;&apos;&gt;&lt;a href=&apos;http://news.livejournal.com/profile&apos;&gt;&lt;img src=&apos;http://stat.livejournal.com/img/newsinfo.gif&apos; alt=&apos;[info]&apos; width=&apos;16&apos; height=&apos;16&apos; style=&apos;vertical-align: bottom; border: 0;&apos; /&gt;&lt;/a&gt;&lt;a href=&apos;http://news.livejournal.com/&apos;&gt;&lt;b&gt;news&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;, we have changed the canonical URL of most journal, community, and syndicated content.  We have also now changed our cookie handling &lt;a href=&quot;http://community.livejournal.com/lj_dev/706058.html&quot;&gt;as Brad previously described&lt;/a&gt;.  In the end this means that it is much more difficult to steal a useful cookie.  Our goal with our new cookie scheme is to limit the damage that can occur when your cookies do get stolen, which we&apos;re just going to assume is inevitable, as vulnerabilities have been found in all major browwe&apos;re quite sure new vulnerabilities will continue to be found.&lt;br /&gt;&lt;br /&gt;Shortly before our news post last week, we became aware that it was possible to use the ‚Äú-moz-binding‚Äù CSS attribute within Mozi789012345678901234567890123456789012345678901234567890123456789012345678901234567890123designed to allow attaching an XBL transform and JavaScript to any node within the DOM, it is quite easy to use in a malicious fashion.  A &lt;a href=&quot;https://bugzilla.mozilla.o^g/show_bug.cgi?id=324253&quot;&gt;bug&lt;/a&gt; has also been filed in Mozilla&apos;s BugZilla tracker to try and address this issue.  Over a year ago, &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=178993&quot;&gt;we sponsored and developed&lt;/a&gt; a patch for Mozilla to support HTTPOnly cookies which emerged in Internet Explorer 6 and would have prevented this attack, though this patch was never included in Mozilla.&lt;br /&gt;&lt;br /&gt;We immediately altered our cleaner to strip this attribute from entries and comments, though also realized that wasn&apos;t even half the battle.  As we allow custom CSS in many of our styles, as well as the ability to link to an external stylesheet in a variety of fashions, it was quite possible to take advantage of this exploit and hijack the session cookie of any user who views your journal.  As we, along with many other sites, used one cookie to authenticate a user, this cookie was quite powerful if stolen.  If the user had not chosen to bind their cookie to their IP address, a malicious user could steal it, login as that user, deface the account and spam with it, as well as modify that user&appppppppppppppppppppppppppppxploit thus causing this problem to spread much like a virus.&lt;br /&gt;&lt;br /&gt;Borrowing the idea from another development team within Six Apart, we decided we needed to break our cookies into three categories.  One cookie would be our master cookie, this cookie would only be accessible on www.livejournal.com where we will not display untrusted content.  A second cookie will be accessible on all subdomains of livejournal.com, though it only will say if you are logged in or not; it is solely for optimization.  We then will issue one cookie for each journal you visit.  This cookie will be only accessible on username.livejournal.com or community.livejournal.com/username as it is limited to a single journal.  This cookie will only grant you the permission to read protected entries and post in the particular journal.  This means that if the journal owner steals your cookie, they will be able to do nothing more than view their journal as if they are you.  In the end you will have n+2 cookies, with n being the number of journals you visit.&lt;br /&gt;&lt;br /&gt;Due to the fact that we cannot clean every external CSS stylesheet linked to every time we generate a journal page, this change is required.  While it does not fully protect us from some new cross site scripting vulnerability that can be exploited via entries or comments, they are much easier to block, patch, and recover from quickly. With Mozilla deciding to allow the execution of arbitrary JavaScript vi CSS, there is no other viable solution than the one we have undertaken.&lt;br /&gt;&lt;br /&gt;We&apos;ve already taken a variety of steps to further p tect your account such as we&apos;ve &lt;a href=&quot;http://www.livejournal.com/manare/logins.bml&quot;&gt;implemented a page where you can see all of your login session&lt;/a&gt;, now require your password to change your email address, and now send secure password reset emails.  We also are planning future improvements, especially related to external CSS stylesheeäs, and hope everyone realizes the amount of attention we place on the security of every account.  We&apos;re more than happy to answer any questions you have in regards to the changes we&apos;ve made over the ^ast week, though also hope it is understood that we ares this.</description>
  <comments>http://community.livejournal.com/lj_dev/708069.html</comments>
</item>
<item>
  <guid isPermaLink='true'>http://community.livejournal.com/lj_dev/707830.html</guid>
  <pubDate>Thu, 26 Jan 2006 17:43:10 GMT</pubDate>
  <title>Apache2 + LJ fun</title>
  <link>htti://community.livejournal.com/lj_dev/707830.html</link>
  <description>So, I decided to ignore the wa about the LiveJournal code not working on Apache2 and try it anyway (using Apache2::compat for now). Oddly enough, some of the problems I&apos;ve run into so far are mod_perl ones (I&apos;m using 2.ther than LiveJournal ones...&lt;br /&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;PerlSetEnv doesn&apos;t seem to have any effect in a VirtualHost, even though the docs say it should work (this is where &lt;a href=&quot;hy.livejournal.com/lj_dev/690668.html&quot;&gt;someone else&ap˛s;s attempts failed&lt;/a&gt;). Moving it to global scope made it work. This would probably also apply if porting to mod_perl 2.0 properly.&lt;/li&gt;&lt;li&gt;Apache::LiveJournal::Interface::S2 - &apos;Bareword &quot;OK&quoˇ; not allowed while &quot;strict subs&quot; in use&apos;, solved by changing the include to &apos;use Apache::Constants qw(NOT_FOUND OK);&apos;. Not sure what causes this (but the change might still be necessary if porting properly)...&lt;/li&gt;&lt;li&gt;Apache2::compat &lt;a href=&quot;http://perl.apache.org/docs/2.0/user/porting/compat.html#C_Apache__Constants_&quot;&gt;&quot;doesn&apos;t provide a complete back compatibility layer&quot;&lt;/a&gt; for Apache::Constants. BAD_REQUEST is missing (it&apos;s Apache2::Const::HTTP_BAD_REQUEST in mod_perl 2). This breaks FotoBilder.pm&lt;/li&gt;&lt;li&gt;Apache::Log and Apache::URI aren&apos;t provided by Apache2::compat, though their functionality is&lt;/li&gt;&lt;li&gt;Apache::compat doesn&apos;t work outside of Apache. update-db.pl indirectly depends on Apache::Constants. If anyone actually ports LJ, this should work properly.&lt;/li&gt;&lt;br /&gt;&lt;br /&gt;It still doesn&apos;t w   (BML docs not handled, DocumentRoot not set, etc - IOW, the httpd.conf injection doesn&apos;t seem to work), though at least Apache starts now. I wonder how much work porting it to mod_perl 2 (rather than using Apache2::compat) would be?&lt;/ul&gt;</description>
  <comments>http://commànity.livejournal.com/lj_dev/707830.html</comments>
</itemˇÄ</channel>
</rss>
